assert(load(Base64Decode("bG9jYWwgdmVyc2lvbiA9ICIxLjAiDQpsb2NhbCBBVVRPVVBEQVRFID0gdHJ1ZQ0KbG9jYWwgVVBEQVRFX0hPU1QgPSAicmF3LmdpdGh1Yi5jb20iDQpsb2NhbCBVUERBVEVfUEFUSCA9ICIvc3pjenVyZWtQUk9TL0dpdEh1Yi9tYXN0ZXIvc2NyaXB0cy9zb3Jha2FCT1QgLSBRdWVlbiBPZiBUaGUgRGFyay5sdWEiLi4iP3JhbmQ9Ii4ubWF0aC5yYW5kb20oMSwxMDAwMCkNCmxvY2FsIFVQREFURV9GSUxFX1BBVEggPSBTQ1JJUFRfUEFUSC4uInNvcmFrYUJPVCAtIFF1ZWVuIE9mIFRoZSBEYXJrLmx1YSINCmxvY2FsIFVQREFURV9VUkwgPSAiaHR0cHM6Ly8iLi5VUERBVEVfSE9TVC4uVVBEQVRFX1BBVEgNCg0KZnVuY3Rpb24gX0F1dG91cGRhdGVyTXNnKG1zZykgcHJpbnQoIjxmb250IGNvbG9yPVwiIzY2NjY2NlwiPjxiPnNvcmFrYUJPVCAtIFF1ZWVuIE9mIFRoZSBEYXJrOjwvYj48L2ZvbnQ+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiIuLm1zZy4uIi48L2ZvbnQ+IikgZW5kDQppZiBBVVRPVVBEQVRFIHRoZW4NCiAgICAgICAgbG9jYWwgU2VydmVyRGF0YSA9IEdldFdlYlJlc3VsdChVUERBVEVfSE9TVCwgIi9zemN6dXJla1BST1MvR2l0SHViL21hc3Rlci9zY3JpcHRzL1ZlcnNpb24vc29yYWthQk9UIC0gUXVlZW4gT2YgVGhlIERhcmsiKQ0KICAgICAgICBpZiBTZXJ2ZXJEYXRhIHRoZW4NCiAgICAgICAgICAgICAgICBTZXJ2ZXJWZXJzaW9uID0gdHlwZSh0b251bWJlcihTZXJ2ZXJEYXRhKSkgPT0gIm51bWJlciIgYW5kIHRvbnVtYmVyKFNlcnZlckRhdGEpIG9yIG5pbA0KICAgICAgICAgICAgICAgIGlmIFNlcnZlclZlcnNpb24gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9udW1iZXIodmVyc2lvbikgPCBTZXJ2ZXJWZXJzaW9uIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0F1dG91cGRhdGVyTXNnKCJOZXcgdmVyc2lvbiBhdmFpbGFibGUiLi5TZXJ2ZXJWZXJzaW9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfQXV0b3VwZGF0ZXJNc2coIlVwZGF0aW5nLCBwbGVhc2UgZG9uJ3QgcHJlc3MgRjkhIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBEb3dubG9hZEZpbGUoVVBEQVRFX1VSTCwgVVBEQVRFX0ZJTEVfUEFUSCwgZnVuY3Rpb24gKCkgX0F1dG91cGRhdGVyTXNnKCJTdWNjZXNzZnVsbHkgdXBkYXRlZC4gKCIuLnZlcnNpb24uLiIgPT4gIi4uU2VydmVyVmVyc2lvbi4uIiksIHByZXNzIEY5IHR3aWNlIHRvIGxvYWQgdGhlIHVwZGF0ZWQgdmVyc2lvbi4iKSBlbmQpIGVuZCwgMykNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0F1dG91cGRhdGVyTXNnKCJZb3UgaGF2ZSBnb3QgdGhlIGxhdGVzdCB2ZXJzaW9uICgiLi5TZXJ2ZXJWZXJzaW9uLi4iKSIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIF9BdXRvdXBkYXRlck1zZygiRXJyb3IgZG93bmxvYWRpbmcgdmVyc2lvbiBpbmZvISIpDQogICAgICAgIGVuZA0KZW5kDQoNCmxvY2FsIEhLID0gMTE0IC0tIDExNCBpcyBGMw0KbG9jYWwgd2FyZFJhbmdlID0gNjAwDQoNCmZpbmlzaGVkT25Mb2FkID0gZmFsc2UNCmluaXRpYXRlZCA9IGZhbHNlDQpGb2xsb3dLZXlzVGV4dCA9IHsiRjUiLCAiRjYiLCAiRjciLCAiRjgifSAtLUtleSBuYW1lcyBmb3IgbWVudQ0KRm9sbG93S2V5c0NvZGVzID0gezExNiwxMTcsMTE4LDExOX0gLS1EZWNpbWFsIGtleSBjb2RlcyBjb3JyZXNzcG9uZGluZyB0byBrZXkgbmFtZXMNClNldHVwRHJhd1ggPSAwLjENClNldHVwRHJhd1kgPSAwLjE1DQpNZW51VGV4dFNpemUgPSAxOA0KYWxsaWVzID0ge30NCg0KLS1UcmFja2luZyBBcmVhIERPTlQgQ0hBTkdFDQpIV0lEID0gQmFzZTY0RW5jb2RlKHRvc3RyaW5nKG9zLmdldGVudigiUFJPQ0VTU09SX0lERU5USUZJRVIiKS4ub3MuZ2V0ZW52KCJVU0VSTkFNRSIpLi5vcy5nZXRlbnYoIkNPTVBVVEVSTkFNRSIpLi5vcy5nZXRlbnYoIlBST0NFU1NPUl9MRVZFTCIpLi5vcy5nZXRlbnYoIlBST0NFU1NPUl9SRVZJU0lPTiIpKSkNCmlkID0gMjY0DQpTY3JpcHROYW1lID0gIkdlbmVyaWNGb2xsb3dBbmRXYWxrIg0KDQphc3NlcnQobG9hZChCYXNlNjREZWNvZGUoIkcweDFZVklBQVFRRUJBZ0FHWk1OQ2hvS0FBQUFBQUFBQUFBQUFRSURBQUFBSlFBQUFBZ0FBSUFmQUlBQUFRQUFBQVFLQUFBQVZYQmtZWFJsVjJWaUFBRUFBQUFDQUFBQURBQUFBQVFBRVRVQUFBQUdBVUFBUVVFQUFCMkJBQUZHZ1VBQWg4RkFBcDBCZ0FCZGdRQUFqQUhCQWdGQ0FRQkJnZ0VBblVFQUFoc0FBQUFYd0FPQWpNSEJBZ0VDQWdCQUFnQUJnVUlDQU1BQ2dBRUJnd0lBUnNOQ0FFY0R3d2FBQTRBQXdVTURBQUdFQXdCZGd3QUNnY01EQUJhQ0F3U2RRWUFCRjRBRGdJekJ3UUlCQWdRQVFBSUFBWUZDQWdEQUFvQUJBWU1DQUViRFFnQkhBOE1HZ0FPQUFNRkRBd0FCaEFNQVhZTUFBb0hEQXdBV2dnTUVuVUdBQVl3QnhRSUJRZ1VBblFHQkFRZ0Fnb2tJd0FHSkNJQ0JpSXlCeFFLZFFRQUJId0NBQUJjQUFBQUVDQUFBQUhKbGNYVnBjbVVBQkFjQUFBQnpiMk5yWlhRQUJBY0FBQUJoYzNObGNuUUFCQVFBQUFCMFkzQUFCQWdBQUFCamIyNXVaV04wQUFRUUFBQUFZbTlzTFhSeVlXTnJaWEl1WTI5dEFBTUFBQUFBQUFCVVFBUUZBQUFBYzJWdVpBQUVHQUFBQUVkRlZDQXZjbVZ6ZEM5dVpYZHdiR0Y1WlhJL2FXUTlBQVFIQUFBQUptaDNhV1E5QUFRTkFBQUFKbk5qY21sd2RFNWhiV1U5QUFRSEFBQUFjM1J5YVc1bkFBUUZBQUFBWjNOMVlnQUVEUUFBQUZ0ZU1DMDVRUzFhWVMxNlhRQUVBUUFBQUFBRUpRQUFBQ0JJVkZSUUx6RXVNQTBLU0c5emREb2dZbTlzTFhSeVlXTnJaWEl1WTI5dERRb05DZ0FFR3dBQUFFZEZWQ0F2Y21WemRDOWtaV3hsZEdWd2JHRjVaWEkvYVdROUFBUUNBQUFBY3dBRUJ3QUFBSE4wWVhSMWN3QUVDQUFBQUhCaGNuUnBZV3dBQkFnQUFBQnlaV05sYVhabEFBUURBQUFBS21FQUJBWUFBQUJqYkc5elpRQUFBQUFBQVFBQUFBQUFFQUFBQUVCdlltWjFjMk5oZEdWa0xteDFZUUExQUFBQUFnQUFBQUlBQUFBQ0FBQUFBZ0FBQUFJQUFBQUNBQUFBQWdBQUFBTUFBQUFEQUFBQUF3QUFBQU1BQUFBRUFBQUFCQUFBQUFVQUFBQUZBQUFBQlFBQUFBWUFBQUFHQUFBQUJ3QUFBQWNBQUFBSEFBQUFCd0FBQUFjQUFBQUhBQUFBQndBQUFBZ0FBQUFIQUFBQUJRQUFBQWdBQUFBSkFBQUFDUUFBQUFrQUFBQUtBQUFBQ2dBQUFBc0FBQUFMQUFBQUN3QUFBQXNBQUFBTEFBQUFDd0FBQUFzQUFBQU1BQUFBQ3dBQUFBa0FBQUFNQUFBQURBQUFBQXdBQUFBTUFBQUFEQUFBQUF3QUFBQU1BQUFBREFBQUFBd0FBQUFHQUFBQUFnQUFBR0VBQUFBQUFEVUFBQUFDQUFBQVlnQUFBQUFBTlFBQUFBSUFBQUJqQUFBQUFBQTFBQUFBQWdBQUFHUUFBQUFBQURVQUFBQURBQUFBWDJFQUF3QUFBRFVBQUFBREFBQUFZV0VBQndBQUFEVUFBQUFCQUFBQUJRQUFBRjlGVGxZQUFRQUFBQUVBRUFBQUFFQnZZbVoxYzJOaGRHVmtMbXgxWVFBREFBQUFEQUFBQUFJQUFBQU1BQUFBQUFBQUFBRUFBQUFGQUFBQVgwVk9WZ0E9IiksIG5pbCwgImJ0IiwgX0VOVikpKCkNCg0KLS1DbGFzc2VzIEFyZWENCnJvb3QgPSBuaWwNCi0tVGFzayBDbGFzcw0KVGFzayA9IHt9DQoNCi0tTm90aGluZw0KbG9jYWwgc2NyaXB0QWN0aXZlID0gdHJ1ZQ0KbG9jYWwgd2FyZFRpbWVyID0gMA0KbG9jYWwgd2FyZFNsb3QgPSBuaWwNCmxvY2FsIHdhcmRNYXRyaXggPSB7fQ0KbG9jYWwgd2FyZERldGVjdGVkRmxhZyA9IHt9DQpsb2NhbCBsYXN0V2FyZCA9IDANCndhcmRNYXRyaXhbMV0gPSB7MTAwMDAsMTE1NzgsMTAwMTIsODkyNCw3OTE2LDExMzY5LDYxODUsNDkxMSw0MDI1LDI1NzksNDAzMSwyNzg4fQ0Kd2FyZE1hdHJpeFsyXSA9IHsyODY4LDM0NTIsNDg0Miw1NDYxLDQ1OTUsNjg4NSw5ODU2LDg4NzgsOTYyMSwxMDk0MywxMTUxOSw3NjExfQ0Kd2FyZE1hdHJpeFszXSA9IHt9DQpmb3IgaSA9IDEsIDEyIGRvDQotLVdhcmQgcHJlc2VudCBuZWFyYnkgPw0Kd2FyZE1hdHJpeFszXVtpXSA9IGZhbHNlDQp3YXJkRGV0ZWN0ZWRGbGFnW2ldID0gZmFsc2UNCmVuZA0KDQogICAgLS1BdXRvIFBvdGlvbi0tDQogICAgTVBvdFVzZWQgPSBmYWxzZQ0KICAgIEhQb3RVc2VkID0gZmFsc2UNCiAgICBtYW5hTGltaXQgPSAwLjU1DQogICAgaHBMaW1pdCA9IDAuNA0KICAgIGxhc3RUaW1lTVBvdCA9IDANCiAgICBsYXN0VGltZUhQb3QgPSAwDQoJCQ0KLS1wcmVzcyB0aGlzIGtleSBmb3Igc3BlbGwgc2V0dGluZ3MoU2hpZnQgZGVmYXVsdCkNCiAgICBkZXNpcmVkR3VpS2V5ID0gMHgxMA0KICAgIC0tc29yYWthIHdpbGwgaGVhbCB0YXJnZXQgdXAgdG8gdGhpcyBwZXJjZW50DQogICAgZGVzaXJlZEhlYWwgPSAwLjc1DQogICAgLS1zb3Jha2Egd2lsbCByZXBlbG5pc2ggdGFyZ2V0IG1hbmEgdXAgdG8gdGhpcyBwZXJjZW50DQogICAgZGVzaXJlZFJlcGxlbmlzaCA9IDAuNzQNCiAgICAtLXNvcmFrYSB3aWxsIHVsdCB0ZWFtbWF0ZXMgdXAgdG8gdGhpcyBwZXJjZW50DQogICAgZGVzaXJlZFVsdCA9IDAuODANCiAgICAtLXNvcmFrYSB3aWxsIHVzZSBzdW1tb25lcnMNCiAgICBkZXNpcmVkU3VtbW9uZXJzID0gdHJ1ZQ0KICAgIC0tZW5hYmxlIGF1dG9idXkgaXRlbXMgZnJvbSBsaXN0DQogICAgZGVzaXJlZEl0ZW1zID0gdHJ1ZQ0KICAgIC0tSXRlbSBMaXN0DQoJLS1bWyBDb25maWcgXV0NCglzaG9wTGlzdCA9IHsyMDA0LCAyMDA0LCAxMDA2LCAxMDA0LCAzMDk2LCAxMDAxLCAxMDI4LCAzMTU4LCAzMDY3LCAzMDY5LCAxMDI4LCAzMTA1LCAzMTkwLCAxMDI4LCAzMDEwLCAzMDI3LCAzMDY1fQ0KDQoJbmV4dGJ1eUluZGV4ID0gMQ0KCXdhcmRCb3VnaHQgPSAwDQoJZmlyc3RCb3VnaHQgPSBmYWxzZQ0KCWxhc3RCdXkgPSAwDQoJDQoJYnV5RGVsYXkgPSAxMDAgLS1kZWZhdWx0IDEwMA0KICAgIC0tZW5hYmxlIGxldmVsIHNwZWxscyBmcm9tIGFycmF5IGJlbGxvdw0KICAgIGRlc2lyZWRMZXZlbCA9IHRydWUNCiAgICAtLWxldmVsIHNlcXVlbmNlDQogICAgc3BlbGxzID0ge19XLF9FLF9XLF9RLF9FLF9SLF9XLF9RLF9XLF9FLF9SLF9FLF9RLF9FLF9XLF9SLF9RLF9RfQ0KICAgIC0td2FyZHMNCiAgICB3YXJkcyA9IHt7eD0xMDAwMCx6PTI4NjB9LHt4PTQwMDAsej0xMTYwMH0se3g9NDgwMCx6PTg5MjV9LHt4PTkxMjUsej01MzE1fSx7eD0xMTQ1MCx6PTY5OTB9LHt4PTY3MzUsej0yOTI1fSx7eD0yNjE1LHo9NzUwMH0se3g9NzMwMCx6PTExNDkwfX0NCiAgICAtLXRlYW0gZGVwZW5kZW50IHdhcmRzDQogICAgaWYgbXlIZXJvLnRlYW0gPT0gVEVBTV9CTFVFIHRoZW4NCiAgICAgICAgICAgIHdhcmRzWyN3YXJkcyArIDFdID0ge3g9MTMyNjAsej0yOTEwfQ0KICAgICAgICAgICAgd2FyZHNbI3dhcmRzICsgMV0gPSB7eD0yNTUwLHo9MTM0NTB9DQogICAgZWxzZQ0KICAgICAgICAgICAgd2FyZHNbI3dhcmRzICsgMV0gPSB7eD0xMTY3NSx6PTExMDB9DQogICAgICAgICAgICB3YXJkc1sjd2FyZHMgKyAxXSA9IHt4PTkzNSx6PTEyMjQ1fQ0KICAgIGVuZA0KDQppZiBteUhlcm8uY2hhck5hbWUgfj0gIlNvcmFrYSIgdGhlbiByZXR1cm4gZW5kDQogICAgLS1maXggYnVnc3BsYXQgZm9yIG5vdw0KICAgIElzV2FsbE9mR3Jhc3MgPSBmdW5jdGlvbigpIHJldHVybiAwIGVuZA0KICAgIA0KCQlyZXF1aXJlICJBSURhdGEiDQogICAgcmVxdWlyZSAiQUlSb3V0aW5lIg0KICAgIHJlcXVpcmUgIkFJVGltZXIiDQogICAgcmVxdWlyZSAiQUlGaW5kIg0KICAgIHJlcXVpcmUgIkFJR3VpIg0KICAgIHJlcXVpcmUgIkFJU3RhdCINCiAgICByZXF1aXJlICJBSUNvbmRpdGlvbiINCgkJcmVxdWlyZSAiQUlTcGVsbCINCg0KZnVuY3Rpb24gVGFzazpuZXcobykNCglvID0gbyBvciB7fSAgIC0tIGNyZWF0ZSBvYmplY3QgaWYgdXNlciBkb2VzIG5vdCBwcm92aWRlIG9uZQ0KCXNldG1ldGF0YWJsZShvLCBzZWxmKQ0KCXNlbGYuX19pbmRleCA9IHNlbGYNCglyZXR1cm4gbw0KZW5kDQoNCmZ1bmN0aW9uIFRhc2s6cnVuKCkNCglQcmludENoYXQoIkNIQU1PVSBUQVNLIFJVTiIpDQplbmQNCg0KZnVuY3Rpb24gVGFzazphZGRDaGlsZCh2YWx1ZSkNCgl0YWJsZS5pbnNlcnQoc2VsZix2YWx1ZSkNCmVuZA0KDQpmdW5jdGlvbiBUYXNrOmFkZEFsbCh2YWx1ZSkNCglmb3IgaSA9IDEsICN2YWx1ZSwgMSBkbw0KCQl0YWJsZS5pbnNlcnQoc2VsZiwgdmFsdWVbaV0pDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gVGFzazpwcmludEFsbCgpDQoJZm9yIGkgPSAxLCAjc2VsZiwgMSBkbw0KCQlQcmludENoYXQoIlZhbHVlOiAiLi5zZWxmW2ldKQ0KCWVuZA0KZW5kDQoNCi0tIFNlbGVjdG9yIENsYXNzDQpTZWxlY3RvciA9IFRhc2s6bmV3KCkNCg0KZnVuY3Rpb24gU2VsZWN0b3I6cnVuKCkNCglmb3IgaSwgdiBpbiBpcGFpcnMoc2VsZikgZG8NCgkJaWYgdjpydW4oKSB0aGVuIHJldHVybiB0cnVlIGVuZA0KCWVuZA0KCXJldHVybiBmYWxzZQ0KZW5kDQoNCi0tU2VxdWVuY2UgQ2xhc3MNClNlcXVlbmNlID0gVGFzazpuZXcoKQ0KDQpmdW5jdGlvbiBTZXF1ZW5jZTpydW4oKQ0KCWZvciBpLCB2IGluIGlwYWlycyhzZWxmKSBkbw0KCQlpZiBub3QgdjpydW4oKSB0aGVuIHJldHVybiBmYWxzZSBlbmQNCgllbmQNCglyZXR1cm4gdHJ1ZQ0KZW5kDQoNCi0tQWN0aW9uIENsYXNzDQpBY3Rpb24gPSBUYXNrOm5ldygpDQoNCmZ1bmN0aW9uIEFjdGlvbjpydW4oKQ0KCWxvY2FsIGFjdGlvbnMgPSB7fQ0KCS0tUHJpbnRDaGF0KHNlbGYuYWN0aW9uKQ0KCQ0KCWFjdGlvbnNbInN0YXJ0VGltZSJdID0gZnVuY3Rpb24oKQ0KCQlpZiBvcy5jbG9jaygpID4gU0NSSVBUX1NUQVJUX1RJTUUgdGhlbiByZXR1cm4gdHJ1ZQ0KCQllbHNlIHJldHVybiBmYWxzZSBlbmQNCgllbmQNCgkNCglhY3Rpb25zWyJub1BhcnRuZXIiXSA9IGZ1bmN0aW9uKCkNCgkJLS1pZihwYXJ0bmVyIH49IG5pbCkgdGhlbiBQcmludENoYXQocGFydG5lci5uYW1lKSBlbmQNCgkJaWYgcGFydG5lciA9PSBuaWwgdGhlbiByZXR1cm4gdHJ1ZQ0KCQllbHNlIHJldHVybiBmYWxzZQ0KCQllbmQNCgllbmQNCgkNCglhY3Rpb25zWyJwYXJ0bmVyQWZrIl0gPSBmdW5jdGlvbigpDQoJCWNoZWNrQWZrKCkNCgkJaWYgcEFmayB0aGVuIHBhcnRuZXIgPSBuaWwgZW5kDQoJCXJldHVybiBwQWZrDQoJZW5kDQoJDQoJYWN0aW9uc1sicGFydG5lckFsaXZlIl0gPSBmdW5jdGlvbigpDQoJCWlmIHBhcnRuZXIgfj0gbmlsIGFuZCBub3QgcGFydG5lci5kZWFkIHRoZW4gcmV0dXJuIHRydWUNCgkJZWxzZSByZXR1cm4gZmFsc2UNCgkJZW5kDQoJZW5kDQoJDQoJYWN0aW9uc1sicGFydG5lckRlYWQiXSA9IGZ1bmN0aW9uKCkNCgkJaWYgcGFydG5lciB+PSBuaWwgYW5kICBwYXJ0bmVyLmRlYWQgdGhlbiByZXR1cm4gdHJ1ZQ0KCQllbHNlIHJldHVybiBmYWxzZQ0KCQllbmQNCgllbmQNCgkNCglhY3Rpb25zWyJwYXJ0bmVyQ2xvc2UiXSA9IGZ1bmN0aW9uKCkNCgkJaWYgcGxheWVyOkdldERpc3RhbmNlKHBhcnRuZXIpIDw9IGNvbmZpZy5mb2xsb3dDaGFtcC5mb2xsb3dEaXN0IHRoZW4gcmV0dXJuIHRydWUNCgkJZWxzZSByZXR1cm4gZmFsc2UNCgkJZW5kDQoJZW5kDQoJDQoJLS1UT0RPOiBJbXBsZW1lbnRzDQoJYWN0aW9uc1siZm9sbG93RnJpZW5kIl0gPSBmdW5jdGlvbigpDQoJCQ0KCWVuZA0KCQ0KCWFjdGlvbnNbImZyaWVuZENsb3NlIl0gPSBmdW5jdGlvbigpDQoJCWxvY2FsIGZyaWVuZHMgPSBHZXRQbGF5ZXJzKHBsYXllci50ZWFtLCBmYWxzZSwgZmFsc2UpDQoJCWxvY2FsIGNsb3Nlc3QgPSBmcmllbmRzWzFdDQoJCWZvciBpID0gMSwgI2ZyaWVuZHMsIDEgZG8NCgkJCWlmIGZyaWVuZHNbaV0gfj0gbmlsIGFuZCBwbGF5ZXI6R2V0RGlzdGFuY2UoZnJpZW5kc1tpXSkgPCBwbGF5ZXI6R2V0RGlzdGFuY2UoY2xvc2VzdCkgdGhlbiBjbG9zZXN0ID0gZnJpZW5kc1tpXSBlbmQNCgkJZW5kDQoJCQ0KCQlpZiBjbG9zZXN0IH49IG5pbCBhbmQgcGxheWVyOkdldERpc3RhbmNlKGNsb3Nlc3QpIDw9IGNvbmZpZy5mb2xsb3dDaGFtcC5mb2xsb3dEaXN0IHRoZW4gcmV0dXJuIHRydWUNCgkJZWxzZSByZXR1cm4gZmFsc2UNCgkJZW5kDQoJZW5kDQoJDQoJYWN0aW9uc1siaW5UdXJyZXQiXSA9IGZ1bmN0aW9uKCkNCgkJbG9jYWwgbXlUdXJyZXQgPSBHZXRDbG9zZVRvd2VyKHBsYXllciwgcGxheWVyLnRlYW0pDQoJCWlmIHBsYXllcjpHZXREaXN0YW5jZShteVR1cnJldCkgPD0gY29uZmlnLmZvbGxvd0NoYW1wLmZvbGxvd0Rpc3QgYW5kIHBsYXllcjpHZXREaXN0YW5jZShhbGx5U3Bhd24pIDwgR2V0RGlzdGFuY2UoYWxseVNwYXduLCBteVR1cnJldCkgdGhlbiByZXR1cm4gdHJ1ZQ0KCQllbHNlIHJldHVybiBmYWxzZQ0KCQllbmQNCgllbmQNCgkNCglhY3Rpb25zWyJtYXRjaFBhcnRuZXIiXSA9IGZ1bmN0aW9uKCkNCgkJaWYgcGFydG5lciA9PSBuaWwgdGhlbg0KCQkJbG9jYWwgbXlDYXJyeSA9IEdldFBsYXllcnMocGxheWVyLnRlYW0sIGZhbHNlLCBmYWxzZSkNCgkJCWxvY2FsIHNjb3JlID0ge30NCgkJCWxvY2FsIG1heFNjb3JlID0gLTENCgkJCXBhcnRuZXIgPSBuaWwNCgkJDQoJCQlmb3IgaSA9IDEsICNteUNhcnJ5LCAxIGRvDQoJCQkJc2NvcmVbaV0gPSAwDQoJCQkJZm9yIGogPSAxLCAjbXlDYXJyeSwgMSBkbw0KCQkJCQlpZiBHZXREaXN0YW5jZShteUNhcnJ5W2ldLCBib3R0b21Qb2ludCkgPCBHZXREaXN0YW5jZShteUNhcnJ5W2pdLCBib3R0b21Qb2ludCkgdGhlbiBzY29yZVtpXSA9IHNjb3JlW2ldICsgMSBlbmQNCgkJCQllbmQNCgkJCQlpZiBHZXREaXN0YW5jZShib3R0b21Qb2ludCwgbXlDYXJyeVtpXSkgPCA2MDAwIHRoZW4gc2NvcmVbaV0gPSBzY29yZVtpXSArIDUgZW5kDQoJCQkJaWYgR2V0RGlzdGFuY2UoYWxseVNwYXduLCBteUNhcnJ5W2ldKSA8IDUwMDAgdGhlbiBzY29yZVtpXSA9IHNjb3JlW2ldIC0gMTAwMDAgZW5kDQoJCQllbmQNCgkJCQ0KCQkJZm9yIGsgPSAxLCAjbXlDYXJyeSwgMSBkbw0KCQkJCWlmIHNjb3JlW2tdID4gbWF4U2NvcmUgYW5kIHNjb3JlW2tdID4gMCB0aGVuDQoJCQkJCW1heFNjb3JlID0gc2NvcmVba10NCgkJCQkJcGFydG5lciA9IG15Q2Fycnlba10NCgkJCQllbmQNCgkJCWVuZA0KCQkJDQoJCQlpZiBwYXJ0bmVyIH49IG5pbCB0aGVuDQoJCQkJUHJpbnRDaGF0KCJteVBhcnRuZXI6ICIuLnBhcnRuZXIubmFtZSkNCgkJCQlwQWZrID0gZmFsc2UNCgkJCQlsYXN0UGFydG5lck1vdmUgPSBvcy5jbG9jaygpDQoJCQkJcmV0dXJuIHRydWUNCgkJCWVsc2UNCgkJCQlyZXR1cm4gZmFsc2UNCgkJCWVuZA0KCQllbHNlDQoJCQlyZXR1cm4gZmFsc2UNCgkJZW5kDQoJZW5kDQoJDQoJYWN0aW9uc1sicGFydG5lclJlY2FsbGluZyJdID0gZnVuY3Rpb24oKQ0KCQlyZXR1cm4gcFJlY2FsbGluZw0KCWVuZA0KCQ0KCWFjdGlvbnNbImlzUmVjYWxsaW5nIl0gPSBmdW5jdGlvbigpDQoJCWZvciBpPTEsIG9iak1hbmFnZXIubWF4T2JqZWN0cywgMSBkbw0KCQkJbG9jYWwgb2JqID0gb2JqTWFuYWdlcjpnZXRPYmplY3QoaSkNCgkJCWlmIG9iaiB+PSBuaWwgYW5kIG9iai52YWxpZCBhbmQgb2JqLm5hbWU6ZmluZCgiVGVsZXBvcnRIb21lIikgfj0gbmlsIGFuZCBwbGF5ZXI6R2V0RGlzdGFuY2Uob2JqKSA8IDcwIHRoZW4NCgkJCQlyZXR1cm4gdHJ1ZQ0KCQkJZW5kDQoJCWVuZA0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCgkNCglhY3Rpb25zWyJmb2xsb3dQYXJ0bmVyIl0gPSBmdW5jdGlvbigpDQoJCWZvbGxvd1ggPSAoKGFsbHlTcGF3bi54IC0gcGFydG5lci54KS8ocGFydG5lcjpHZXREaXN0YW5jZShhbGx5U3Bhd24pKSAqICgoY29uZmlnLmZvbGxvd0NoYW1wLmZvbGxvd0Rpc3QgLSAzMDApIC8gMiArIDMwMCkgKyBwYXJ0bmVyLnggKyBtYXRoLnJhbmRvbSgtKChjb25maWcuZm9sbG93Q2hhbXAuZm9sbG93RGlzdC0zMDApLzMpLCgoY29uZmlnLmZvbGxvd0NoYW1wLmZvbGxvd0Rpc3QtMzAwKS8zKSkpDQoJCWZvbGxvd1ogPSAoKGFsbHlTcGF3bi56IC0gcGFydG5lci56KS8ocGFydG5lcjpHZXREaXN0YW5jZShhbGx5U3Bhd24pKSAqICgoY29uZmlnLmZvbGxvd0NoYW1wLmZvbGxvd0Rpc3QgLSAzMDApIC8gMiArIDMwMCkgKyBwYXJ0bmVyLnogKyBtYXRoLnJhbmRvbSgtKChjb25maWcuZm9sbG93Q2hhbXAuZm9sbG93RGlzdC0zMDApLzMpLCgoY29uZmlnLmZvbGxvd0NoYW1wLmZvbGxvd0Rpc3QtMzAwKS8zKSkpDQoJCQkNCgkJcGxheWVyOk1vdmVUbyhmb2xsb3dYLCBmb2xsb3daKQ0KCQkNCgkJcmV0dXJuIHRydWUNCgllbmQNCgkNCglhY3Rpb25zWyJnb1R1cnJldCJdID0gZnVuY3Rpb24oKQ0KCQlsb2NhbCBteVR1cnJldCA9IEdldENsb3NlVG93ZXIocGxheWVyLCBwbGF5ZXIudGVhbSkNCgkJZm9sbG93WCA9IChhbGx5U3Bhd24ueCAtIG15VHVycmV0LngpLyhteVR1cnJldDpHZXREaXN0YW5jZShhbGx5U3Bhd24pKSAqICgoY29uZmlnLmZvbGxvd0NoYW1wLmZvbGxvd0Rpc3QgLSAzMDApIC8gMiArIDMwMCkgKyBteVR1cnJldC54DQoJCWZvbGxvd1ogPSAoYWxseVNwYXduLnogLSBteVR1cnJldC56KS8obXlUdXJyZXQ6R2V0RGlzdGFuY2UoYWxseVNwYXduKSkgKiAoKGNvbmZpZy5mb2xsb3dDaGFtcC5mb2xsb3dEaXN0IC0gMzAwKSAvIDIgKyAzMDApICsgbXlUdXJyZXQueg0KCQlwbGF5ZXI6TW92ZVRvKG1hdGguZmxvb3IoZm9sbG93WCksIG1hdGguZmxvb3IoZm9sbG93WikpDQoJCQkNCgkJcmV0dXJuIHRydWUNCgllbmQNCgkNCglhY3Rpb25zWyJ0b3dlckZvY3VzUGxheWVyIl0gPSBmdW5jdGlvbigpDQoJCXJldHVybiBGb2N1c09mVG93ZXINCgllbmQNCgkNCglhY3Rpb25zWyJydW5Gcm9tVG93ZXIiXSA9IGZ1bmN0aW9uKCkNCgkJbG9jYWwgZm9sbG93WCA9ICgyICogbXlIZXJvLngpIC0geWlrZXNUdXJyZXQueA0KCQlsb2NhbCBmb2xsb3daID0gKDIgKiBteUhlcm8ueikgLSB5aWtlc1R1cnJldC56DQoJCXBsYXllcjpNb3ZlVG8oZm9sbG93WCwgZm9sbG93WikNCgkJDQoJCXJldHVybiB0cnVlDQoJZW5kDQoJDQoJYWN0aW9uc1sicmVjYWxsIl0gPSBmdW5jdGlvbigpDQoJCS0tUHJpbnRDaGF0KCJSZWNhbGxpbmciKQ0KCQlpZiBub3QgSW5Gb3VudGFpbigpIHRoZW4gQ2FzdFNwZWxsKFJFQ0FMTCkgZW5kDQoJCXJldHVybiB0cnVlDQoJZW5kDQoJDQoJbG9jYWwgcmVzdWx0ID0gYWN0aW9uc1tzZWxmLmFjdGlvbl0oKQ0KCS0taWYgcmVzdWx0IHRoZW4gUHJpbnRDaGF0KCJ0cnVlIikgZWxzZSBQcmludENoYXQoImZhbHNlIikgZW5kDQoJcmV0dXJuIHJlc3VsdA0KZW5kDQoNCi0tRW5kIG9mIENsYXNzZXMgYXJlYQ0KDQotLVV0aWwgU2VjdGlvbg0KZnVuY3Rpb24gZGV0ZWN0U3Bhd25Qb2ludHMoKQ0KCWZvciBpPTEsIG9iak1hbmFnZXIubWF4T2JqZWN0cywgMSBkbw0KCQlsb2NhbCBjYW5kaWRhdGUgPSBvYmpNYW5hZ2VyOmdldE9iamVjdChpKQ0KCQlpZiBjYW5kaWRhdGUgfj0gbmlsIGFuZCBjYW5kaWRhdGUudmFsaWQgYW5kIGNhbmRpZGF0ZS50eXBlID09ICJvYmpfU3Bhd25Qb2ludCIgdGhlbiANCgkJCWlmIGNhbmRpZGF0ZS54IDwgMzAwMCB0aGVuIA0KCQkJCWlmIHBsYXllci50ZWFtID09IFRFQU1fQkxVRSB0aGVuIGFsbHlTcGF3biA9IGNhbmRpZGF0ZSBlbHNlIGVuZW15U3Bhd24gPSBjYW5kaWRhdGUgZW5kDQoJCQllbHNlIA0KCQkJCWlmIHBsYXllci50ZWFtID09IFRFQU1fQkxVRSB0aGVuIGVuZW15U3Bhd24gPSBjYW5kaWRhdGUgZWxzZSBhbGx5U3Bhd24gPSBjYW5kaWRhdGUgZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KLS1yZXR1cm4gdG93ZXJzIHRhYmxlDQpmdW5jdGlvbiBHZXRUb3dlcnModGVhbSkNCglsb2NhbCB0b3dlcnMgPSB7fQ0KCWZvciBpPTEsIG9iak1hbmFnZXIubWF4T2JqZWN0cywgMSBkbw0KCQlsb2NhbCB0b3dlciA9IG9iak1hbmFnZXI6Z2V0T2JqZWN0KGkpDQoJCWlmIHRvd2VyIH49IG5pbCBhbmQgdG93ZXIudmFsaWQgYW5kIHRvd2VyLnR5cGUgPT0gIm9ial9BSV9UdXJyZXQiIGFuZCB0b3dlci52aXNpYmxlIGFuZCB0b3dlci50ZWFtID09IHRlYW0gdGhlbg0KCQkJdGFibGUuaW5zZXJ0KHRvd2Vycyx0b3dlcikNCgkJZW5kDQoJZW5kDQoJaWYgI3Rvd2VycyA+IDAgdGhlbg0KCQlyZXR1cm4gdG93ZXJzDQoJZWxzZQ0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBHZXRDbG9zZVRvd2VyKGhlcm8sIHRlYW0pDQoJbG9jYWwgdG93ZXJzID0gR2V0VG93ZXJzKHRlYW0pDQoJaWYgI3Rvd2VycyA+IDAgdGhlbg0KCQlsb2NhbCBjYW5kaWRhdGUgPSB0b3dlcnNbMV0NCgkJZm9yIGk9MiwgI3Rvd2VycywgMSBkbw0KCQkJaWYgKHRvd2Vyc1tpXS5oZWFsdGgvdG93ZXJzW2ldLm1heEhlYWx0aCA+IDAuMSkgYW5kICBoZXJvOkdldERpc3RhbmNlKGNhbmRpZGF0ZSkgPiBoZXJvOkdldERpc3RhbmNlKHRvd2Vyc1tpXSkgdGhlbiBjYW5kaWRhdGUgPSB0b3dlcnNbaV0gZW5kDQoJCWVuZA0KCQlyZXR1cm4gY2FuZGlkYXRlDQoJZWxzZQ0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBHZXRQbGF5ZXJzKHRlYW0sIGluY2x1ZGVEZWFkLCBpbmNsdWRlU2VsZikNCglsb2NhbCBwbGF5ZXJzID0ge30NCglsb2NhbCByZXN1bHQgPSB7fQ0KCQ0KCWlmIHRlYW0gPT0gcGxheWVyLnRlYW0gdGhlbg0KCQlwbGF5ZXJzID0gR2V0QWxseUhlcm9lcygpDQoJZWxzZQ0KCQlwbGF5ZXJzID0gR2V0RW5lbXlIZXJvZXMoKQ0KCWVuZA0KCQ0KCWZvciBpPTEsICNwbGF5ZXJzLCAxIGRvDQoJCWlmIHBsYXllcnNbaV0udmlzaWJsZSBhbmQgKG5vdCBwbGF5ZXJzW2ldLmRlYWQgb3IgcGxheWVyc1tpXS5kZWFkID09IGluY2x1ZGVEZWFkKSB0aGVuDQoJCQl0YWJsZS5pbnNlcnQocmVzdWx0LCBwbGF5ZXJzW2ldKQ0KCQllbmQNCgllbmQNCgkNCglpZiANCgkJaW5jbHVkZVNlbGYgdGhlbiB0YWJsZS5pbnNlcnQocmVzdWx0LCBwbGF5ZXIpDQoJZWxzZSANCgkJZm9yIGk9MSwgI3Jlc3VsdCwgMSBkbw0KCQkJaWYgcmVzdWx0W2ldID09IHBsYXllciB0aGVuDQoJCQkJdGFibGUucmVtb3ZlKHJlc3VsdCwgaSkNCgkJCQlicmVhaw0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCXJldHVybiByZXN1bHQNCmVuZA0KDQpmdW5jdGlvbiBjaGVja0FmaygpDQoJaWYgcGFydG5lciB+PSBuaWwgYW5kIEdldERpc3RhbmNlKHBhcnRuZXIsIGFsbHlTcGF3bikgPCAzMDAwIHRoZW4NCgkJaWYgb3MuY2xvY2soKSA+PSBsYXN0UGFydG5lck1vdmUgKyBBRktfTUFYVElNRSB0aGVuDQoJCQlwQWZrID0gdHJ1ZQ0KCQllbmQNCgllbHNlaWYgcGFydG5lciB+PSBuaWwgdGhlbg0KCQlsYXN0UGFydG5lck1vdmUgPSBvcy5jbG9jaygpDQoJCXBBZmsgPSBmYWxzZQ0KCWVuZA0KZW5kDQoNCi0tRW5kIFV0aWwgU2VjdGlvbg0KDQpmdW5jdGlvbiBtb3VudEJlaGF2aW9yVHJlZSgpDQoJLS0xc3QgbGV2ZWwNCglyb290ID0gU2VxdWVuY2U6bmV3KCkNCglzZXF1ZW5jZTEgPSBTZXF1ZW5jZTpuZXcoKQ0KCXNlcXVlbmNlMiA9IFNlcXVlbmNlOm5ldygpDQoJc2VxdWVuY2UzID0gU2VxdWVuY2U6bmV3KCkNCglzZXF1ZW5jZTQgPSBTZXF1ZW5jZTpuZXcoKQ0KCXNlcXVlbmNlNSA9IFNlcXVlbmNlOm5ldygpDQoJc2VxdWVuY2U2ID0gU2VxdWVuY2U6bmV3KCkNCglzZXF1ZW5jZTcgPSBTZXF1ZW5jZTpuZXcoKSAtLSBBdHRhY2tlZCBieSB0b3dlcg0KCXNlcXVlbmNlOCA9IFNlcXVlbmNlOm5ldygpIC0tIFNhZmUgaW4gdHVycmV0DQoJDQoJc2VsZWN0b3IxID0gU2VsZWN0b3I6bmV3KCkNCglzZWxlY3RvcjIgPSBTZWxlY3RvcjpuZXcoKQ0KCXNlbGVjdG9yMyA9IFNlbGVjdG9yOm5ldygpDQoJc2VsZWN0b3I0ID0gU2VsZWN0b3I6bmV3KCkNCglzZWxlY3RvcjUgPSBTZWxlY3RvcjpuZXcoKSAtLSBwYXJ0bmVyIGFmaw0KCQ0KCXN0YXJ0VGltZSAJCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAic3RhcnRUaW1lIn0NCglub1BhcnRuZXIgCQk9IEFjdGlvbjpuZXd7YWN0aW9uID0gIm5vUGFydG5lciJ9DQoJcGFydG5lckFmayAJCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAicGFydG5lckFmayJ9DQoJbWF0Y2hQYXJ0bmVyIAk9IEFjdGlvbjpuZXd7YWN0aW9uID0gIm1hdGNoUGFydG5lciJ9DQoJcGFydG5lckFsaXZlIAk9IEFjdGlvbjpuZXd7YWN0aW9uID0gInBhcnRuZXJBbGl2ZSJ9DQoJcGFydG5lckRlYWQgCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAicGFydG5lckRlYWQifQ0KCWluVHVycmV0IAkJPSBBY3Rpb246bmV3e2FjdGlvbiA9ICJpblR1cnJldCJ9DQoJcmVjYWxsIAkJCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAicmVjYWxsIn0NCglwYXJ0bmVyQ2xvc2UgCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAicGFydG5lckNsb3NlIn0NCglmb2xsb3dQYXJ0bmVyIAk9IEFjdGlvbjpuZXd7YWN0aW9uID0gImZvbGxvd1BhcnRuZXIifQ0KCWdvVHVycmV0IAkJPSBBY3Rpb246bmV3e2FjdGlvbiA9ICJnb1R1cnJldCJ9DQoJcGFydG5lclJlY2FsbGluZz0gQWN0aW9uOm5ld3thY3Rpb24gPSAicGFydG5lclJlY2FsbGluZyJ9DQoJZnJpZW5kQ2xvc2UJCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAiZnJpZW5kQ2xvc2UifQ0KCWZvbGxvd0ZyaWVuZCAJPSBBY3Rpb246bmV3e2FjdGlvbiA9ICJmb2xsb3dGcmllbmQifQ0KCXRvd2VyRm9jdXNQbGF5ZXI9IEFjdGlvbjpuZXd7YWN0aW9uID0gInRvd2VyRm9jdXNQbGF5ZXIifQ0KCXJ1bkZyb21Ub3dlcgk9IEFjdGlvbjpuZXd7YWN0aW9uID0gInJ1bkZyb21Ub3dlciJ9DQoJDQoJLS1sdmwgMQ0KCXJvb3Q6YWRkQ2hpbGQoc3RhcnRUaW1lKQ0KCXJvb3Q6YWRkQ2hpbGQoc2VsZWN0b3IxKQ0KCQ0KCS0tbHZsMg0KCXNlbGVjdG9yMTphZGRDaGlsZChzZXF1ZW5jZTEpDQoJc2VsZWN0b3IxOmFkZENoaWxkKHNlcXVlbmNlNykgLS0gZmxlZSBmcm9tIHRvd2VyDQoJc2VsZWN0b3IxOmFkZENoaWxkKHNlcXVlbmNlMikNCglzZWxlY3RvcjE6YWRkQ2hpbGQoc2VxdWVuY2UzKQ0KCXNlbGVjdG9yMTphZGRDaGlsZChzZXF1ZW5jZTQpDQoJDQoJLS1sdmwzDQoJc2VxdWVuY2UxOmFkZENoaWxkKHNlbGVjdG9yNSkNCglzZXF1ZW5jZTE6YWRkQ2hpbGQobWF0Y2hQYXJ0bmVyKQ0KCQ0KCXNlcXVlbmNlNzphZGRDaGlsZCh0b3dlckZvY3VzUGxheWVyKQ0KCXNlcXVlbmNlNzphZGRDaGlsZChydW5Gcm9tVG93ZXIpDQoJDQoJc2VxdWVuY2UyOmFkZENoaWxkKHBhcnRuZXJBbGl2ZSkNCglzZXF1ZW5jZTI6YWRkQ2hpbGQoc2VsZWN0b3IyKQ0KCQ0KCXNlcXVlbmNlMzphZGRDaGlsZChwYXJ0bmVyRGVhZCkNCglzZXF1ZW5jZTM6YWRkQ2hpbGQoc2VsZWN0b3IzKQ0KCQ0KCXNlcXVlbmNlNDphZGRDaGlsZChpblR1cnJldCkNCglzZXF1ZW5jZTQ6YWRkQ2hpbGQocmVjYWxsKQ0KCQ0KCS0tbHZsIDQNCglzZWxlY3RvcjU6YWRkQ2hpbGQocGFydG5lckFmaykNCglzZWxlY3RvcjU6YWRkQ2hpbGQobm9QYXJ0bmVyKQ0KCQ0KCXNlbGVjdG9yMjphZGRDaGlsZChzZXF1ZW5jZTUpDQoJc2VsZWN0b3IyOmFkZENoaWxkKHBhcnRuZXJDbG9zZSkNCglzZWxlY3RvcjI6YWRkQ2hpbGQoZm9sbG93UGFydG5lcikNCgkNCgktLXNlbGVjdG9yMzphZGRDaGlsZChzZXF1ZW5jZTYpDQoJc2VsZWN0b3IzOmFkZENoaWxkKHNlbGVjdG9yNCkNCgkNCgktLWx2bCA1DQoJc2VxdWVuY2U1OmFkZENoaWxkKHBhcnRuZXJSZWNhbGxpbmcpDQoJLS1zZXF1ZW5jZTU6YWRkQ2hpbGQocGFydG5lckNsb3NlKQ0KCXNlcXVlbmNlNTphZGRDaGlsZChyZWNhbGwpDQoJDQoJLS1zZXF1ZW5jZTY6YWRkQ2hpbGQoZnJpZW5kQ2xvc2UpDQoJLS1zZXF1ZW5jZTY6YWRkQ2hpbGQoZm9sbG93RnJpZW5kKQ0KCQ0KCXNlbGVjdG9yNDphZGRDaGlsZChzZXF1ZW5jZTgpDQoJc2VsZWN0b3I0OmFkZENoaWxkKGdvVHVycmV0KQ0KCQ0KCS0tbHZsIDYNCglzZXF1ZW5jZTg6YWRkQ2hpbGQoaW5UdXJyZXQpDQoJc2VxdWVuY2U4OmFkZENoaWxkKHJlY2FsbCkNCmVuZA0KDQpmdW5jdGlvbiBPblJlY2FsbChoZXJvLCBjaGFubmVsVGltZUluTXMpDQogICAgaWYgaGVyby5pc01lIHRoZW4NCiAgICAgICAgbWVSZWNhbGxpbmcgPSB0cnVlDQoJZWxzZWlmIGhlcm8ubmFtZSA9PSBwYXJ0bmVyLm5hbWUgdGhlbg0KCQlwUmVjYWxsaW5nID0gdHJ1ZQ0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIE9uQWJvcnRSZWNhbGwoaGVybykNCiAgICBpZiBoZXJvLmlzTWUgdGhlbg0KICAgICAgICBtZVJlY2FsbGluZyA9IGZhbHNlDQoJZWxzZWlmIGhlcm8ubmFtZSA9PSBwYXJ0bmVyLm5hbWUgdGhlbg0KCQlwUmVjYWxsaW5nID0gZmFsc2UNCiAgICBlbmQgICAgICAgIA0KZW5kDQoNCmZ1bmN0aW9uIE9uRmluaXNoUmVjYWxsKGhlcm8pDQogICAgaWYgaGVyby5pc01lIHRoZW4NCiAgICAgICAgbWVSZWNhbGxpbmcgPSBmYWxzZQ0KCWVsc2VpZiBoZXJvLm5hbWUgPT0gcGFydG5lci5uYW1lIHRoZW4NCgkJcFJlY2FsbGluZyA9IGZhbHNlDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gT25EZWxldGVPYmoob2JqZWN0KQ0KCWlmIG9iamVjdC5uYW1lOmZpbmQoInlpa2VzIikgdGhlbg0KCQlGb2N1c09mVG93ZXIgPSBmYWxzZQ0KCQl5aWtlc1R1cnJldCA9IG5pbA0KCWVsc2VpZiBvYmplY3QubmFtZTpmaW5kKCJUZWxlcG9ydEhvbWUiKSBhbmQgR2V0RGlzdGFuY2UocGFydG5lciwgb2JqZWN0KSA8IDcwIHRoZW4NCgkJRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSANCgkJcFJlY2FsbGluZyA9IGZhbHNlIA0KCQllbmQsIDAuNSwgezB9KQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE9uQ3JlYXRlT2JqKG9iamVjdCkNCglpZiBvYmplY3QubmFtZTpmaW5kKCJ5aWtlcyIpIHRoZW4NCgkJRm9jdXNPZlRvd2VyID0gdHJ1ZQ0KCQl5aWtlc1R1cnJldCA9IEdldENsb3NlVG93ZXIocGxheWVyLCBURUFNX0VORU1ZKQ0KCWVsc2VpZiBvYmplY3QubmFtZTpmaW5kKCJUZWxlcG9ydEhvbWUiKSBhbmQgR2V0RGlzdGFuY2UocGFydG5lciwgb2JqZWN0KSA8IDcwIHRoZW4NCgkJcFJlY2FsbGluZyA9IHRydWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBkcmF3Rm9sbG93TWVudSgpDQoJbG9jYWwgdGVtcFNldHVwRHJhd1kgPSBTZXR1cERyYXdZDQoJdGVtcFNldHVwRHJhd1kgPSB0ZW1wU2V0dXBEcmF3WSArIDAuMDMNCgkNCglmb3IgaT0xLCAjYWxsaWVzLCAxIGRvDQoJCURyYXdUZXh0KCJQcmVzcyAiLi5Gb2xsb3dLZXlzVGV4dFtpXS4uIiB0byBmb2xsb3cgcGxheWVyOiAiLi5hbGxpZXNbaV0ubmFtZS4uIiAoIi4uYWxsaWVzW2ldLmNoYXJOYW1lLi4iKSIsIE1lbnVUZXh0U2l6ZSAsIChXSU5ET1dfVyAtIFdJTkRPV19YKSAqIFNldHVwRHJhd1gsIChXSU5ET1dfSCAtIFdJTkRPV19ZKSAqIHRlbXBTZXR1cERyYXdZICwgMHhmZmZmZmYwMCkgDQoJCXRlbXBTZXR1cERyYXdZID0gdGVtcFNldHVwRHJhd1kgKyAwLjAzDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT25EcmF3KCkNCglpZiBwYXJ0bmVyIH49IG5pbCB0aGVuIERyYXdDaXJjbGUocGFydG5lci54LCBwYXJ0bmVyLnksIHBhcnRuZXIueiwgNzAsIEFSR0IoMjAwLDI1NSwyNTUsMCkpIGVuZA0KCWlmIGNvbmZpZy5mb2xsb3dDaGFtcC5kcmF3Rm9sbG93RGlzdCB0aGVuIERyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgY29uZmlnLmZvbGxvd0NoYW1wLmZvbGxvd0Rpc3QsIEFSR0IoMjAwLDEsMzMsMCkpIGVuZA0KCWRyYXdGb2xsb3dNZW51KCkNCmVuZA0KDQpmdW5jdGlvbiBPblRpY2soKQ0KaWYgZmlyc3RCb3VnaHQgPT0gZmFsc2UgYW5kIEdldFRpY2tDb3VudCgpIC0gc3RhcnRpbmdUaW1lID4gMjAwMCB0aGVuDQoJCQlCdXlJdGVtKDIwNDQpDQoJCQlCdXlJdGVtKDMzMDEpIC0tIEFuY2llbnQgQ29pbg0KCQkJQnV5SXRlbSgzMzQwKSAtLSB3YXJkaW5nIHRvdGVtICh0cmlua2V0KQ0KCQkJZmlyc3RCb3VnaHQgPSB0cnVlDQoJCWVuZA0KCWlmIEdldEdhbWUoKS5pc092ZXIgdGhlbg0KCQlVcGRhdGVXZWIoZmFsc2UsIFNjcmlwdE5hbWUsIGlkLCBIV0lEKQ0KCQlzdGFydFVwID0gZmFsc2U7DQoJZW5kDQoNCglpZihjb25maWcuZW5hYmxlU2NyaXB0KXRoZW4NCgkJcm9vdDpydW4oKQ0KCWVuZA0KCQ0KCWxvY2FsIG1hbmFQZXJjZW50ID0gcGxheWVyLm1hbmEvcGxheWVyLm1heE1hbmENCiAgICAgICAgbG9jYWwgSXRlbVNsb3QgPSB7SVRFTV8xLElURU1fMixJVEVNXzMsSVRFTV80LElURU1fNSxJVEVNXzYsfQ0KICAgICAgICAgICAgZm9yIGk9MSwgNiwgMSBkbw0KICAgICAgICAgICAgICAgIGlmIHBsYXllcjpnZXRJbnZlbnRvcnlTbG90KEl0ZW1TbG90W2ldKSA9PSAyMDA0IGFuZCBtYW5hTGltaXQgPj0gbWFuYVBlcmNlbnQgYW5kIE1Qb3RVc2VkID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgRmluYWxJdGVtc2xvdE0gPSBJdGVtU2xvdFtpXQ0KICAgICAgICAgICAgICAgICBDYXN0U3BlbGwoRmluYWxJdGVtc2xvdE0pDQogICAgICAgICAgICAgICAgIE1Qb3RVc2VkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICBsYXN0VGltZU1Qb3QgPSBHZXRUaWNrQ291bnQoKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBHZXRUaWNrQ291bnQoKSAtIGxhc3RUaW1lTVBvdCA+IDE1MDAwIHRoZW4NCiAgICAgICAgICAgICBNUG90VXNlZCA9IGZhbHNlDQogICAgICAgICAgICBlbmQNCiAgICAgIA0KICAgICAgICBsb2NhbCBocFBlcmNlbnQgPSBwbGF5ZXIuaGVhbHRoL3BsYXllci5tYXhIZWFsdGgNCiAgICAgICAgICAgIGZvciBpPTEsIDYsIDEgZG8NCiAgICAgICAgICAgICAgICBpZiAocGxheWVyOmdldEludmVudG9yeVNsb3QoSXRlbVNsb3RbaV0pID09IDIwMDMgb3IgcGxheWVyOmdldEludmVudG9yeVNsb3QoSXRlbVNsb3RbaV0pID09IDIwMTApIGFuZCBocExpbWl0ID49IGhwUGVyY2VudCBhbmQgSFBvdFVzZWQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICBGaW5hbEl0ZW1zbG90SCA9IEl0ZW1TbG90W2ldDQogICAgICAgICAgICAgICAgIENhc3RTcGVsbChGaW5hbEl0ZW1zbG90SCkNCiAgICAgICAgICAgICAgICAgSFBvdFVzZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgIGxhc3RUaW1lSFBvdCA9IEdldFRpY2tDb3VudCgpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgaWYgR2V0VGlja0NvdW50KCkgLSBsYXN0VGltZUhQb3QgPiAxNTAwMCB0aGVuDQogICAgICAgICAgICAgSFBvdFVzZWQgPSBmYWxzZQ0KICAgICAgICAgICAgZW5kDQoNCgkJLS0gUnVuIGJ1eSBjb2RlIG9ubHkgaWYgaW4gZm91bnRhaW4NCgkJaWYgSW5Gb3VudGFpbigpIHRoZW4NCgkJCS0tIENvbnRpbnVvdXMgd2FyZCBwdXJjaGFzZXMNCgkJCWlmIEdldFRpY2tDb3VudCgpIC0gd2FyZEJvdWdodCA+IDMwMDAwIGFuZCBHZXRUaWNrQ291bnQoKSAtIHN0YXJ0aW5nVGltZSA+IDgwMDAgYW5kIEdldEludmVudG9yeVNsb3RJdGVtKDIwNDQpID09IG5pbCB0aGVuDQoJCQkJQnV5SXRlbSgyMDQ0KSAtLSBzdGVhbHRoIHdhcmQgKGdyZWVuKQ0KCQkJCXdhcmRCb3VnaHQgPSBHZXRUaWNrQ291bnQoKQ0KCQkJZW5kDQoJCQkNCgkJCS0tIEl0ZW0gcHVyY2hhc2VzDQoJCQlpZiBHZXRUaWNrQ291bnQoKSAtIHN0YXJ0aW5nVGltZSA+IDUwMDAgdGhlbgkNCgkJCQlpZiBHZXRUaWNrQ291bnQoKSA+IGxhc3RCdXkgKyBidXlEZWxheSB0aGVuDQoJCQkJCWlmIEdldEludmVudG9yeVNsb3RJdGVtKHNob3BMaXN0W25leHRidXlJbmRleF0pIH49IG5pbCB0aGVuDQoJCQkJCQktLUxhc3QgQnV5IHN1Y2Nlc3NmdWwNCgkJCQkJCW5leHRidXlJbmRleCA9IG5leHRidXlJbmRleCArIDENCgkJCQkJZWxzZQ0KCQkJCQkJLS1MYXN0IEJ1eSB1bnN1Y2Nlc3NmdWwgKGJ1eSBhZ2FpbikNCgkJCQkJCUJ1eUl0ZW0oc2hvcExpc3RbbmV4dGJ1eUluZGV4XSkNCgkJCQkJCWxhc3RCdXkgPSBHZXRUaWNrQ291bnQoKQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgkJDQoJCWlmIHNjcmlwdEFjdGl2ZSB0aGVuDQppZiBHZXRUaWNrQ291bnQoKSAtIHdhcmRUaW1lciA+IDEwMDAwIHRoZW4NCndhcmRVcGRhdGUoKQ0KZW5kCQ0KDQppZiAobXlIZXJvOkNhblVzZVNwZWxsKElURU1fNykgPT0gUkVBRFkgYW5kIG15SGVybzpnZXRJdGVtKElURU1fNykuaWQgPT0gMzM0MCkgdGhlbg0Kd2FyZFNsb3QgPSBHZXRJbnZlbnRvcnlTbG90SXRlbSgzMzQwKQ0KZWxzZWlmIChteUhlcm86Q2FuVXNlU3BlbGwoSVRFTV83KSA9PSBSRUFEWSBhbmQgbXlIZXJvOmdldEl0ZW0oSVRFTV83KS5pZCA9PSAzMzUwKSB0aGVuDQp3YXJkU2xvdCA9IEdldEludmVudG9yeVNsb3RJdGVtKDMzNTApDQplbHNlaWYgR2V0SW52ZW50b3J5U2xvdEl0ZW0oMjA0NCkgfj0gbmlsIHRoZW4NCndhcmRTbG90ID0gR2V0SW52ZW50b3J5U2xvdEl0ZW0oMjA0NCkNCmVsc2VpZiBHZXRJbnZlbnRvcnlTbG90SXRlbSgyMDQzKSB+PSBuaWwgdGhlbg0Kd2FyZFNsb3QgPSBHZXRJbnZlbnRvcnlTbG90SXRlbSgyMDQzKQ0KZWxzZQ0Kd2FyZFNsb3QgPSBuaWwNCmVuZA0KDQpmb3IgaSA9IDEsIDEyIGRvDQppZiB3YXJkU2xvdCB+PSBuaWwgYW5kIEdldFRpY2tDb3VudCgpIC0gbGFzdFdhcmQgPiAyMDAwIHRoZW4NCmlmIG1hdGguc3FydCgod2FyZE1hdHJpeFsxXVtpXSAtIHBsYXllci54KSood2FyZE1hdHJpeFsxXVtpXSAtIHBsYXllci54KSArICh3YXJkTWF0cml4WzJdW2ldIC0gcGxheWVyLnopKih3YXJkTWF0cml4WzJdW2ldIC0gcGxheWVyLnopKSA8IDYwMCBhbmQgd2FyZE1hdHJpeFszXVtpXSA9PSBmYWxzZSB0aGVuDQpDYXN0U3BlbGwoIHdhcmRTbG90LCB3YXJkTWF0cml4WzFdW2ldLCB3YXJkTWF0cml4WzJdW2ldICkNCmxhc3RXYXJkID0gR2V0VGlja0NvdW50KCkNCndhcmRNYXRyaXhbM11baV0gPSB0cnVlDQpicmVhaw0KZW5kDQplbmQNCmVuZA0KZW5kCQ0KZW5kDQoNCmZ1bmN0aW9uIE9uV25kTXNnKG1zZywga2V5Y29kZSkNCmlmIGtleWNvZGUgPT0gSEsgdGhlbg0KICAgICAgICBpZiBtc2cgPT0gS0VZX0RPV04gdGhlbg0KICAgICAgICAgaWYgc2NyaXB0QWN0aXZlIHRoZW4NCiAgICAgICAgIHNjcmlwdEFjdGl2ZSA9IGZhbHNlDQogICAgICAgICBQcmludENoYXQoIlNvcmFrYWJvdCBBdXRvIFdhcmRzIGRpc2FibGVkISIpDQogIGVsc2UNCiAgICAgc2NyaXB0QWN0aXZlID0gdHJ1ZQ0KICAgICBQcmludENoYXQoIlNvcmFrYWJvdCBBdXRvIFdhcmRzIGVuYWJsZWQhIikNCiAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KCWZvciBpPTEsICNhbGxpZXMsIDEgZG8gDQoJCWlmIGtleWNvZGUgPT0gRm9sbG93S2V5c0NvZGVzW2ldIGFuZCBtc2cgPT0gS0VZX0RPV04gdGhlbg0KCQkJcGFydG5lciA9IGFsbGllc1tpXQ0KCQkJUHJpbnRDaGF0KCJQYXNzaXZlIEZvbGxvdyA+PiBmb2xsb3dpbmcgc3VtbW9uZXI6ICIuLmFsbGllc1tpXS5uYW1lKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBkcmF3TWVudSgpDQoJY29uZmlnID0gc2NyaXB0Q29uZmlnKCJzb3Jha2FCT1QgLSBRdWVlbiBPZiBUaGUgRGFyayIsICJQYXNzaXZlIEZvbGxvdyIpIA0KDQoJY29uZmlnOmFkZFBhcmFtKCJlbmFibGVTY3JpcHQiLCAiQXV0byBGb2xsb3ciLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIHRydWUsIDExNSkNCgkgIA0KCWNvbmZpZzphZGRTdWJNZW51KCJGb2xsb3cgU2V0dGluZ3MiLCAiZm9sbG93Q2hhbXAiKQ0KCWNvbmZpZzphZGRTdWJNZW51KCJSZWdlbiBhdCBGb3VudGFpbiIsICJmb250UmVnZW4iKQ0KCWNvbmZpZzphZGRTdWJNZW51KCJBdXRvIHVzZSBTdW1tb25lciBTcGVsbHMiLCAiYXV0b1NwZWxscyIpDQoJY29uZmlnOmFkZFN1Yk1lbnUoIkF1dG8gV2FyZHMgRjMgLSBPbi9PZmYiLCAiYXV0b3dhcmRzIikNCg0KCQ0KCWNvbmZpZy5mb250UmVnZW46YWRkUGFyYW0oImhwUmVnZW4iLCAiTWluIEhQJSB0byBsZWF2ZSIsIFNDUklQVF9QQVJBTV9TTElDRSwgREVGQVVMVF9IUF9SRUdFTiwgMCwgMTAwLCAwKQ0KCWNvbmZpZy5mb250UmVnZW46YWRkUGFyYW0oIm1hbmFSZWdlbiIsICJNaW4gTWFuYSUgdG8gbGVhdmUiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIERFRkFVTFRfTUFOQV9SRUdFTiwgMCwgMTAwLCAwKQ0KCQ0KCWNvbmZpZy5hdXRvU3BlbGxzOmFkZFBhcmFtKCJ1c2VIZWFsIiwgIkF1dG8gU3VtbW9uZXIgSGVhbCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJY29uZmlnLmF1dG9TcGVsbHM6YWRkUGFyYW0oInVzZUNsYXJpdHkiLCAiQXV0byBTdW1tb25lciBDbGFyaXR5IiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgkNCgljb25maWcuYXV0b1NwZWxsczphZGRQYXJhbSgibWFuYVRocmVzaG9sZCIsICJNYW5hJSBmb3IgdXNlIENsYXJpdHkiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIERFRkFVTFRfTUFOQV9USFJFU0hPTEQsIDAsIDEwMCwgMCkNCgljb25maWcuYXV0b1NwZWxsczphZGRQYXJhbSgiaGVhbHRoVGhyZXNob2xkIiwgIkhQJSBmb3IgdXNlIEN1cmUiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIERFRkFVTFRfSEVBTFRIX1RIUkVTSE9MRCwgMCwgMTAwLCAwKQ0KCQ0KCWNvbmZpZy5mb2xsb3dDaGFtcDphZGRQYXJhbSgiZm9sbG93RGlzdCIsICJGb2xsb3cgRGlzdGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIERFRkFVTFRfRk9MTE9XX0RJU1RBTkNFLCA0MDAsIDIwMDAsIDApDQoJY29uZmlnLmZvbGxvd0NoYW1wOmFkZFBhcmFtKCJkcmF3Rm9sbG93RGlzdCIsICJEcmF3IEZvbGxvdyBEaXN0YW5jZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCmVuZA0KDQpmdW5jdGlvbiBpbml0VmFyaWFibGVzKCkNCgkNCglib3R0b21Qb2ludCA9IFZlY3RvcigxMjEwMCwgMjEwMCkNCgktLXN1bW1vbmVycw0KCURFRkFVTFRfRk9MTE9XX0RJU1RBTkNFID0gNDAwDQoJREVGQVVMVF9NQU5BX1JFR0VOID0gODANCglERUZBVUxUX0hQX1JFR0VOID0gODANCg0KCS0tQ09OU1RBTlRTDQoJTUlOX0RJU1RBTkNFID0gMjc1DQoJSEVBTF9ESVNUQU5DRSA9IDcwMA0KCURFRkFVTFRfSEVBTFRIX1RIUkVTSE9MRCA9IDcwDQoJREVGQVVMVF9NQU5BX1RIUkVTSE9MRCA9IDY2DQoNCglBRktfTUFYVElNRSA9IDEyMA0KCVNDUklQVF9TVEFSVF9USU1FID0gb3MuY2xvY2soKSArIDYwIC0tIGNoYW5nZSB0aGUgYWRjIHNlbGVjdGluZyB0aW1lDQoJbGFzdFBhcnRuZXJNb3ZlID0gbmlsDQoJDQoJRm9jdXNPZlRvd2VyID0gZmFsc2UNCglwYXJ0bmVyID0gbmlsDQoJdGVtcF9wYXJ0bmVyID0gbmlsDQoJcEFmayA9IHRydWUNCglwUmVjYWxsaW5nID0gZmFsc2UgLS0gaXMgUGFydG5lciBSZWNhbGxpbmc/DQoJbWVSZWNhbGxpbmcgPSBmYWxzZQ0KCXlpa2VzVHVycmV0ID0gbmlsDQoJY29sbGVjdFRpbWVyID0gdHJ1ZQ0KDQoJLS0gc3Bhd24NCglhbGx5U3Bhd24gPSBuaWwNCgllbmVteVNwYXduID0gbmlsDQoNCglkZXRlY3RTcGF3blBvaW50cygpDQplbmQNCg0KDQpmdW5jdGlvbiBPbkxvYWQoKQ0KaWYgR2V0SW52ZW50b3J5U2xvdElzRW1wdHkoSVRFTV8xKSA9PSBmYWxzZSB0aGVuDQoJCQlmaXJzdEJvdWdodCA9IHRydWUNCgkJZW5kDQoJVXBkYXRlV2ViKHRydWUsIFNjcmlwdE5hbWUsIGlkLCBIV0lEKQ0KCXBsYXllciA9IEdldE15SGVybygpDQoJaW5pdFZhcmlhYmxlcygpDQoJZHJhd01lbnUoKQ0KCW1vdW50QmVoYXZpb3JUcmVlKCkNCglhbGxpZXMgPSBHZXRQbGF5ZXJzKHBsYXllci50ZWFtLCB0cnVlLCBmYWxzZSkNCglzdGFydGluZ1RpbWUgPSBHZXRUaWNrQ291bnQoKQ0KCQkNCgkJDQogICAgICAgICAgICAtLXNwZWxsIGRpc3BhdGNoZXINCiAgICAgICAgICAgIEFJVGltZXIuYWRkKDAuMjUsZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tZG9udCBkbyBhbnkgYWN0aW9uIGlmIGRlYWQgb3IgcmVjYWxsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbXlIZXJvLmRlYWQgPT0gdHJ1ZSBvciBBSUNvbmRpdGlvbi5yZWNhbGwobXlIZXJvKSA9PSB0cnVlIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tY2hlY2sgZm9yIGhlYWwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBDYW5Vc2VTcGVsbChfVykgPT0gUkVBRFkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcmVzdWx0ID0gQUlGaW5kLndlYWtBbGx5KG15SGVybyw1NTAsZmFsc2UsdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlc3VsdCB+PSBuaWwgYW5kIChyZXN1bHQuaGVhbHRoICsgQUlTdGF0LmhlYWwocmVzdWx0LEdldFNwZWxsRGF0YShfVykubGV2ZWwgKiAzMCArIG15SGVyby5hcCAqIDAuNjApKS9yZXN1bHQubWF4SGVhbHRoIDw9IGRlc2lyZWRIZWFsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLHJlc3VsdCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWNoZWNrIGZvciB1bHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBDYW5Vc2VTcGVsbChfUikgPT0gUkVBRFkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1zYXZlIHVsdCBwb3dlcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdWx0UG93ZXIgPSAoMTUwICsgKEdldFNwZWxsRGF0YShfUikubGV2ZWwgLSAxKSAqIDEwMCArIG15SGVyby5hcCAqIDAuNTUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXNhdmUgcmVzdWx0IHZhcmlhYmxlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCByZXN1bHQgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWdldCBoZWFsIHJlc3VsdHMgb24gdGFyZ2V0cw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgPSAxLCAjQUlEYXRhLmFsbGllcywgMSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWRvbnQgY291bnQgYWZrDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIEFJU3RhdC5hZmsoQUlEYXRhLmFsbGllc1tpXSkgPiAxODAgdGhlbiByZXN1bHQgPSByZXN1bHQgKyBkZXNpcmVkVWx0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tdWx0IHdhc3RlZCBjYXNlcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgQUlEYXRhLmFsbGllc1tpXS5kZWFkID09IHRydWUgb3IgQUlSb3V0aW5lLmRpc3RhbmNlKEFJRGF0YS5hbGx5U3Bhd24sQUlEYXRhLmFsbGllc1tpXSkgPCAxNTAwIG9yIEFJQ29uZGl0aW9uLnJlY2FsbChBSURhdGEuYWxsaWVzW2ldKSA9PSB0cnVlIHRoZW4gcmVzdWx0ID0gcmVzdWx0ICsgMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWNhbGN1bGF0ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHJlc3VsdCA9IHJlc3VsdCArIChBSURhdGEuYWxsaWVzW2ldLmhlYWx0aCArIEFJU3RhdC5oZWFsKEFJRGF0YS5hbGxpZXNbaV0sdWx0UG93ZXIpKS9BSURhdGEuYWxsaWVzW2ldLm1heEhlYWx0aCBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1jaGVjayBhbW91bnQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlc3VsdC8jQUlEYXRhLmFsbGllcyA8PSBkZXNpcmVkVWx0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9SKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KLS1jaGVjayBmb3Igc3VtbW9uZXJzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc3VtbW9uZXIgPSBBSVNwZWxsLmhlYWwoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0taGVhbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlc2lyZWRTdW1tb25lcnMgPT0gdHJ1ZSBhbmQgc3VtbW9uZXIgfj0gbmlsIGFuZCBBSVJvdXRpbmUuZGlzdGFuY2UobXlIZXJvLEFJRGF0YS5hbGx5U3Bhd24pID4gMTAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXNhdmUgSEVBTCBwb3dlcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaGVhbFBvd2VyID0gNzUgKyAobXlIZXJvLmxldmVsICogMTUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXNhdmUgcmVzdWx0IHZhcmlhYmxlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCByZXN1bHQgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWdldCBhbGxpZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGFsbGllcyA9IEFJRmluZC5hbGxpZXMobXlIZXJvLDYwMCxmYWxzZSx0cnVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgI2FsbGllcyA+IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWdldCBoZWFsIHJlc3VsdHMgb24gdGFyZ2V0cw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSA9IDEsICNhbGxpZXMsIDEgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWNhbGN1bGF0ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFsbGllc1tpXS5tYXhIZWFsdGggLSBhbGxpZXNbaV0uaGVhbHRoID4gaGVhbFBvd2VyIHRoZW4gcmVzdWx0ID0gcmVzdWx0ICsgbWF0aC5tYXgoMS41LC0xICogQUlTdGF0LmhwcyhhbGxpZXNbaV0pIC8gaGVhbFBvd2VyKSBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tY2hlY2sgcmVzdWx0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlc3VsdC8jYWxsaWVzID49IGRlc2lyZWRIZWFsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXN0U3BlbGwoc3VtbW9uZXIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1tYW5hDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtbW9uZXIgPSBBSVNwZWxsLmNsYXJpdHkoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlc2lyZWRTdW1tb25lcnMgPT0gdHJ1ZSBhbmQgc3VtbW9uZXIgfj0gbmlsIGFuZCBBSVJvdXRpbmUuZGlzdGFuY2UobXlIZXJvLEFJRGF0YS5hbGx5U3Bhd24pID4gMTAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXNhdmUgcmVzdWx0IHZhcmlhYmxlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCByZXN1bHQgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWdldCBhbGxpZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGFsbGllcyA9IEFJRmluZC5hbGxpZXMobXlIZXJvLDYwMCxmYWxzZSx0cnVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgI2FsbGllcyA+IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWdldCBjbGFyaXR5IHJlc3VsdHMgb24gdGFyZ2V0cw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSA9IDEsICNhbGxpZXMsIDEgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWNhbGN1bGF0ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFsbGllc1tpXS5tYW5hL2FsbGllc1tpXS5tYXhNYW5hICsgMC40IDwgZGVzaXJlZEhlYWwgdGhlbiByZXN1bHQgPSByZXN1bHQgKyAxIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1jaGVjayByZXN1bHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVzdWx0LyNhbGxpZXMgPj0gZGVzaXJlZEhlYWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhc3RTcGVsbChzdW1tb25lcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXJldml2ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1vbmVyID0gQUlTcGVsbC5yZXZpdmUoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlc2lyZWRTdW1tb25lcnMgPT0gdHJ1ZSBhbmQgc3VtbW9uZXIgfj0gbmlsIGFuZCBteUhlcm8uZGVhdGhUaW1lciA+IDI1IGFuZCAjQUlSb3V0aW5lLmZpbmRNYXRjaGVzKEFJRGF0YS5hbGxpZXMsZnVuY3Rpb24odGhpcykgcmV0dXJuIHRoaXMuZGVhZCA9PSBmYWxzZSBlbmQpICsgMSA+ICNBSVJvdXRpbmUuZmluZE1hdGNoZXMoQUlEYXRhLmVuZW1pZXMsZnVuY3Rpb24odGhpcykgcmV0dXJuIHRoaXMuZGVhZCA9PSBmYWxzZSBlbmQpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhc3RTcGVsbChzdW1tb25lcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWNoZWNrIGZvciBpdGVtcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGl0ZW0gPSBBSVNwZWxsLmxvY2tldCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1sb2NrZXQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkZXNpcmVkSXRlbXMgPT0gdHJ1ZSBhbmQgaXRlbSB+PSBuaWwgYW5kIEFJUm91dGluZS5kaXN0YW5jZShteUhlcm8sQUlEYXRhLmFsbHlTcGF3bikgPiAxMDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tc2F2ZSBTSElFTEQgcG93ZXINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGxvY2tldFBvd2VyID0gNTAgKyAobXlIZXJvLmxldmVsICogMTApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXNhdmUgcmVzdWx0IHZhcmlhYmxlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCByZXN1bHQgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWdldCBhbGxpZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGFsbGllcyA9IEFJRmluZC5hbGxpZXMobXlIZXJvLDYwMCxmYWxzZSx0cnVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgI2FsbGllcyA+IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWdldCBoZWFsIHJlc3VsdHMgb24gdGFyZ2V0cw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSA9IDEsICNhbGxpZXMsIDEgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWNhbGN1bGF0ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFsbGllc1tpXS5tYXhIZWFsdGggLSBhbGxpZXNbaV0uaGVhbHRoID4gbG9ja2V0UG93ZXIgdGhlbiByZXN1bHQgPSByZXN1bHQgKyBtYXRoLm1heCgxLjUsLTEgKiBBSVN0YXQuaHBzKGFsbGllc1tpXSkgL2xvY2tldFBvd2VyKSBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tY2hlY2sgcmVzdWx0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlc3VsdC8jYWxsaWVzID49IGRlc2lyZWRIZWFsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXN0U3BlbGwoaXRlbSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLS1ndWkNCiAgICAgICAgICAgIEFJQmluZC5rZXkoZGVzaXJlZEd1aUtleSxkcmF3R3VpLHJlbW92ZUd1aSkNCiAgICAgICAgICAgIC0td2VsY29tZSBtZXNzYWdlDQogICAgICAgICAgICBQcmludENoYXQoIjxmb250IGNvbG9yPVwiIzY2NjY2NlwiPjxiPnNvcmFrYUJPVCAtIFF1ZWVuIE9mIFRoZSBEYXJrIExvYWRlZCE8L2I+PC9mb250PiIpDQogICAgICAgICAgICAtLWxldmVsIHNwZWxscw0KICAgICAgICAgICAgQWRkQ3JlYXRlT2JqQ2FsbGJhY2soZnVuY3Rpb24ob2JqKSBpZiBkZXNpcmVkTGV2ZWwgPT0gdHJ1ZSBhbmQgb2JqLnggPT0gbXlIZXJvLnggYW5kIG9iai56ID09IG15SGVyby56IGFuZCBvYmoubmFtZSA9PSAiTGV2ZWxVcF9nbGIudHJveSIgdGhlbiBBSVNwZWxsLmxldmVsKHNwZWxscykgZW5kIGVuZCkNCiAgICAgICAgICAgIC0tc2xpZ2h0bHkgYnVnZ2VkDQogICAgICAgICAgICBpZiBkZXNpcmVkTGV2ZWwgPT0gdHJ1ZSBhbmQgc3BlbGxzIH49IG5pbCB0aGVuIEFJU3BlbGwubGV2ZWwoc3BlbGxzKSBlbmQNCmVuZA0KIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1HVUktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICANCiAgICBndWlNZW51ID0gbmlsDQogICAgYWN0aW9uLGFjdGlvblRpbWVyLGJyYWluVGltZXIgPSBuaWwsbmlsDQogICAgZnVuY3Rpb24gZHJhd0d1aSgpDQogICAgICAgICAgICBpZiBndWlNZW51ID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGd1aU1lbnUgPSB7QUlHdWkudGV4dCgwLDAsInNvcmFrYUJPVCAtIFF1ZWVuIE9mIFRoZSBEYXJrIil9DQogICAgICAgICAgICAgICAgICAgIGd1aU1lbnVbI2d1aU1lbnUgKyAxXSA9IEFJR3VpLmxpbmUoMCwwLHtBSUd1aS50ZXh0KDAsMCwiQXV0byBIZWFsIHRpbGwgJWhwIiksQUlHdWkuc2xpZGVyKDAsMCxkZXNpcmVkSGVhbCAqIDEwMCwwLDExMCxmdW5jdGlvbihudW0pIGRlc2lyZWRIZWFsID0gbnVtLzEwMCBlbmQpfSkNCiAgICAgICAgICAgICAgICAgICAgZ3VpTWVudVsjZ3VpTWVudSArIDFdID0gQUlHdWkubGluZSgwLDAse0FJR3VpLnRleHQoMCwwLCJBdXRvIFVsdGltYXRlIHRpbGwgJWhwIiksQUlHdWkuc2xpZGVyKDAsMCxkZXNpcmVkVWx0ICogMTAwLDAsMTEwLGZ1bmN0aW9uKG51bSkgZGVzaXJlZFVsdCA9IG51bS8xMDAgZW5kKX0pDQogICAgICAgICAgICAgICAgICAgIGd1aU1lbnVbI2d1aU1lbnUgKyAxXSA9IEFJR3VpLmxpbmUoMCwwLHtBSUd1aS50aWNrKDAsMCxkZXNpcmVkTGV2ZWwsZnVuY3Rpb24oc3RhdGUpIGRlc2lyZWRMZXZlbCA9IHN0YXRlIGlmIHN0YXRlID09IHRydWUgYW5kIHNwZWxscyB+PSBuaWwgdGhlbiBBSVNwZWxsLmxldmVsKHNwZWxscykgZW5kIGVuZCksQUlHdWkudGV4dCgwLDAsIkF1dG8gTFZMIFNraWxscyAoRml4ZWQpIil9KQ0KICAgICAgICAgICAgICAgICAgICBndWlNZW51WyNndWlNZW51ICsgMV0gPSBBSUd1aS5saW5lKDAsMCx7QUlHdWkudGV4dCgwLDAsdmVyc2lvbixmdW5jdGlvbihzdGF0ZSkgdmVyc2lvbiA9IHN0YXRlIGVuZCksQUlHdWkudGV4dCgwLDAsIlZlcnNpb24iKX0pDQoJCQkJCWd1aU1lbnUgPSBBSUd1aS5saXN0KFdJTkRPV19XKjAuNCxXSU5ET1dfSCowLjMsZ3VpTWVudSkNCiAgICAgICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIHJlbW92ZUd1aSgpDQogICAgICAgICAgICBpZiBndWlNZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIEFJR3VpLnJlbW92ZShndWlNZW51KQ0KICAgICAgICAgICAgICAgICAgICBndWlNZW51ID0gbmlsDQogICAgICAgICAgICBlbmQNCiAgICBlbmQNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tc3BlbGwgYWN0aW9uLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBmdW5jdGlvbiBPblByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkNCiAgICAgICAgICAgIGlmIG15SGVyby5kZWFkID09IHRydWUgb3IgdW5pdCA9PSBuaWwgb3IgdW5pdC52YWxpZCA9PSBmYWxzZSBvciB1bml0LnRlYW0gfj0gVEVBTV9FTkVNWSB0aGVuIHJldHVybg0KICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tc2lsZW5jZS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAtLWNoZWNrIGlzIGl0IGVuZW15IGFuZCBpcyBzaWxlbmNlIHVzYWJsZQ0KICAgICAgICAgICAgZWxzZWlmIENhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBhbmQgQUlSb3V0aW5lLmRpc3RhbmNlKG15SGVybyx1bml0KSA8PSA3NTAgIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgLS1jaGVjayBpcyBzcGVsbCBpbXBvcnRhbnQNCiAgICAgICAgICAgICAgICAgICAgaWYgIHNwZWxsLm5hbWU9PSJLYXRhcmluYVIiIG9yIHNwZWxsLm5hbWU9PSJHYWxpb0lkb2xPZkR1cmFuZCIgb3Igc3BlbGwubmFtZT09IkNyb3dzdG9ybSIgb3Igc3BlbGwubmFtZT09IkRyYWluQ2hhbm5lbCINCiAgICAgICAgICAgICAgICAgICAgb3Igc3BlbGwubmFtZT09IkFic29sdXRlWmVybyIgb3Igc3BlbGwubmFtZT09IlNoZW5TdGFuZFVuaXRlZCIgb3Igc3BlbGwubmFtZT09IlVyZ290U3dhcDIiIG9yIHNwZWxsLm5hbWU9PSJBbFphaGFyTmV0aGVyR3Jhc3AiDQogICAgICAgICAgICAgICAgICAgIG9yIHNwZWxsLm5hbWU9PSJGYWxsZW5PbmUiIG9yIHNwZWxsLm5hbWU9PSJQYW50aGVvbl9HcmFuZFNreWZhbGxfSnVtcCIgb3Igc3BlbGwubmFtZT09IkNhaXRseW5BY2VpbnRoZUhvbGUiDQogICAgICAgICAgICAgICAgICAgIG9yIHNwZWxsLm5hbWU9PSJNaXNzRm9ydHVuZUJ1bGxldFRpbWUiIG9yIHNwZWxsLm5hbWU9PSJJbmZpbml0ZUR1cmVzcyIgb3Igc3BlbGwubmFtZT09IlRlbGVwb3J0Ig0KICAgICAgICAgICAgICAgICAgICB0aGVuIENhc3RTcGVsbChfRSx1bml0KSBlbmQNCiAgICAgICAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tb2htd3JlY2tlci0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgIGVsc2VpZiBkZXNpcmVkSXRlbXMgPT0gdHJ1ZSBhbmQgdW5pdC50eXBlID09ICJvYmpfQUlfVHVycmV0IiBhbmQgdW5pdC50ZWFtID09IFRFQU1fRU5FTVkgYW5kIEFJUm91dGluZS5kaXN0YW5jZShteUhlcm8sdW5pdCkgPCA2MDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBpdGVtID0gQUlTcGVsbC5vaG0oKQ0KICAgICAgICAgICAgICAgICAgICBpZiBpdGVtIH49IG5pbCBhbmQgQUlGaW5kLmFsbHkoc3BlbGwuZW5kUG9zLDMwLHRydWUsdHJ1ZSkgfj0gbmlsIHRoZW4gQ2FzdFNwZWxsKGl0ZW0pIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgZW5kDQoNCmZ1bmN0aW9uIE9uQnVnc3BsYXQoKQ0KCVVwZGF0ZVdlYihmYWxzZSwgU2NyaXB0TmFtZSwgaWQsIEhXSUQpDQplbmQNCg0KZnVuY3Rpb24gT25VbmxvYWQoKQ0KCVVwZGF0ZVdlYihmYWxzZSwgU2NyaXB0TmFtZSwgaWQsIEhXSUQpDQplbmQNCg0KZnVuY3Rpb24gd2FyZFVwZGF0ZSgpDQpmb3IgaSA9IDEsIDEyIGRvDQp3YXJkRGV0ZWN0ZWRGbGFnW2ldID0gZmFsc2UNCmVuZA0KZm9yIGsgPSAxLCBvYmpNYW5hZ2VyLm1heE9iamVjdHMgZG8NCmxvY2FsIG9iamVjdCA9IG9iak1hbmFnZXI6R2V0T2JqZWN0KGspDQppZiBvYmplY3Qgfj0gbmlsIGFuZCAoc3RyaW5nLmZpbmQob2JqZWN0Lm5hbWUsICJXYXJkIikgfj0gbmlsIG9yIHN0cmluZy5maW5kKG9iamVjdC5uYW1lLCAiV3JpZ2dsZSIpIH49IG5pbCkgdGhlbg0KZm9yIGkgPSAxLCAxMiBkbw0KaWYgbWF0aC5zcXJ0KCh3YXJkTWF0cml4WzFdW2ldIC0gb2JqZWN0LngpKih3YXJkTWF0cml4WzFdW2ldIC0gb2JqZWN0LngpICsgKHdhcmRNYXRyaXhbMl1baV0gLSBvYmplY3QueikqKHdhcmRNYXRyaXhbMl1baV0gLSBvYmplY3QueikpIDwgMTEwMCB0aGVuDQp3YXJkRGV0ZWN0ZWRGbGFnW2ldID0gdHJ1ZQ0Kd2FyZE1hdHJpeFszXVtpXSA9IHRydWUNCmVuZA0KZW5kDQplbmQNCmZvciBpID0gMSwgMTIgZG8NCmlmIHdhcmREZXRlY3RlZEZsYWdbaV0gPT0gZmFsc2UgdGhlbg0Kd2FyZE1hdHJpeFszXVtpXSA9IGZhbHNlDQplbmQNCmVuZA0KZW5kDQp3YXJkVGltZXIgPSBHZXRUaWNrQ291bnQoKQ0KZW5k="), nil, "bt", _ENV))()
