assert(load(Base64Decode("bG9jYWwgdmVyc2lvbiA9ICIxLjIiDQpsb2NhbCBBVVRPVVBEQVRFID0gdHJ1ZQ0KbG9jYWwgVVBEQVRFX0hPU1QgPSAicmF3LmdpdGh1Yi5jb20iDQpsb2NhbCBVUERBVEVfUEFUSCA9ICIvc3pjenVyZWtQUk9TL0dpdEh1Yi9tYXN0ZXIvc2NyaXB0cy9zb3Jha2FCT1QgLSBRdWVlbiBPZiBUaGUgRGFyay5sdWEiLi4iP3JhbmQ9Ii4ubWF0aC5yYW5kb20oMSwxMDAwMCkNCmxvY2FsIFVQREFURV9GSUxFX1BBVEggPSBTQ1JJUFRfUEFUSC4uInNvcmFrYUJPVCAtIFF1ZWVuIE9mIFRoZSBEYXJrLmx1YSINCmxvY2FsIFVQREFURV9VUkwgPSAiaHR0cHM6Ly8iLi5VUERBVEVfSE9TVC4uVVBEQVRFX1BBVEgNCg0KZnVuY3Rpb24gX0F1dG91cGRhdGVyTXNnKG1zZykgcHJpbnQoIjxmb250IGNvbG9yPVwiIzY2NjY2NlwiPjxiPnNvcmFrYUJPVCAtIFF1ZWVuIE9mIFRoZSBEYXJrOjwvYj48L2ZvbnQ+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiIuLm1zZy4uIi48L2ZvbnQ+IikgZW5kDQppZiBBVVRPVVBEQVRFIHRoZW4NCiAgICAgICAgbG9jYWwgU2VydmVyRGF0YSA9IEdldFdlYlJlc3VsdChVUERBVEVfSE9TVCwgIi9zemN6dXJla1BST1MvR2l0SHViL21hc3Rlci9zY3JpcHRzL1ZlcnNpb24vc29yYWthQk9UIC0gUXVlZW4gT2YgVGhlIERhcmsiKQ0KICAgICAgICBpZiBTZXJ2ZXJEYXRhIHRoZW4NCiAgICAgICAgICAgICAgICBTZXJ2ZXJWZXJzaW9uID0gdHlwZSh0b251bWJlcihTZXJ2ZXJEYXRhKSkgPT0gIm51bWJlciIgYW5kIHRvbnVtYmVyKFNlcnZlckRhdGEpIG9yIG5pbA0KICAgICAgICAgICAgICAgIGlmIFNlcnZlclZlcnNpb24gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9udW1iZXIodmVyc2lvbikgPCBTZXJ2ZXJWZXJzaW9uIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0F1dG91cGRhdGVyTXNnKCJOZXcgdmVyc2lvbiBhdmFpbGFibGUiLi5TZXJ2ZXJWZXJzaW9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfQXV0b3VwZGF0ZXJNc2coIlVwZGF0aW5nLCBwbGVhc2UgZG9uJ3QgcHJlc3MgRjkhIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBEb3dubG9hZEZpbGUoVVBEQVRFX1VSTCwgVVBEQVRFX0ZJTEVfUEFUSCwgZnVuY3Rpb24gKCkgX0F1dG91cGRhdGVyTXNnKCJTdWNjZXNzZnVsbHkgdXBkYXRlZC4gKCIuLnZlcnNpb24uLiIgPT4gIi4uU2VydmVyVmVyc2lvbi4uIiksIHByZXNzIEY5IHR3aWNlIHRvIGxvYWQgdGhlIHVwZGF0ZWQgdmVyc2lvbi4iKSBlbmQpIGVuZCwgMykNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0F1dG91cGRhdGVyTXNnKCJZb3UgaGF2ZSBnb3QgdGhlIGxhdGVzdCB2ZXJzaW9uICgiLi5TZXJ2ZXJWZXJzaW9uLi4iKSIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIF9BdXRvdXBkYXRlck1zZygiRXJyb3IgZG93bmxvYWRpbmcgdmVyc2lvbiBpbmZvISIpDQogICAgICAgIGVuZA0KZW5kDQoNCmxvY2FsIEF1dGhMaXN0ID0geyJzemN6dXJlayIsIlRoZUJ1bWVrIiwiYXdlc29tZXNlYmEifSAtLVtbVGFibGUgb2YgdXNlcnMgd2hvIHlvdSB3aXNoIHRvIHVzZSB0aGUgc2NyaXB0Ll1dDQpsb2NhbCBVc2VyID0gc3RyaW5nLmxvd2VyKEdldFVzZXIoKSkgLS1bW0NhbGxzIHRoZSBHZXRVc2VyKCkgZnVuY3Rpb24gb25jZSBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLl1dDQpmdW5jdGlvbiBBdXRoKCkNCmZvciBpLCB1c2VycyBpbiBwYWlycyhBdXRoTGlzdCkgZG8gLS1bW0ZvciBsb29wIHRvIGNvbXBhcmUgdGhlIHVzZXJuYW1lcy5dXQ0KaWYgc3RyaW5nLmxvd2VyKHVzZXJzKSA9PSBVc2VyIHRoZW4gLS1bW0NoZWNrcyBpZiB0aGUgdXNlcm5hbWVzIG1hdGNoLl1dDQpyZXR1cm4gdHJ1ZSAtLVtbQXV0aGVudGljYXRlcyB0aGUgdXNlciBpZiB0aGUgdXNlcm5hbWVzIG1hdGNoLl1dDQplbmQNCmVuZA0KcmV0dXJuIGZhbHNlIC0tW1tJZiB0aGUgdXNlcm5hbWVzIGRvbid0IG1hdGNoIGFmdGVyIHRoZSBmb3IgbG9vcCBpcyBjb21wbGV0ZWQsIHRoZSBzY3JpcHQgZG9lc24ndCBhdXRoZW50aWNhdGUgeW91Ll1dDQplbmQNCmlmIG5vdCBBdXRoKCkgdGhlbiBwcmludCgiTm90IEF1dGhlbnRpY2F0ZWQiKSByZXR1cm4gZW5kIC0tW1tUZWxscyB0aGUgdXNlciB0aGF0IHRoZXkgY2FuJ3QgdXNlIHRoZSBzY3JpcHQuXV0NCnByaW50KCJBdXRoZW50aWNhdGVkIGFzICIuLlVzZXIpIC0tW1tUZWxscyB0aGUgdXNlciBrbm93IHRoYXQgdGhleSBjYW4gdXNlIHRoZSBzY3JpcHQuXV0NCi0tW1tQbGFjZSB5b3VyIHNjcmlwdCBjb2RlIGhlcmUuXV0tLQ0KDQpsb2NhbCBISyA9IDExNCAtLSAxMTQgaXMgRjMNCmxvY2FsIHdhcmRSYW5nZSA9IDYwMA0KDQpmaW5pc2hlZE9uTG9hZCA9IGZhbHNlDQppbml0aWF0ZWQgPSBmYWxzZQ0KRm9sbG93S2V5c1RleHQgPSB7IkY1IiwgIkY2IiwgIkY3IiwgIkY4In0gLS1LZXkgbmFtZXMgZm9yIG1lbnUNCkZvbGxvd0tleXNDb2RlcyA9IHsxMTYsMTE3LDExOCwxMTl9IC0tRGVjaW1hbCBrZXkgY29kZXMgY29ycmVzc3BvbmRpbmcgdG8ga2V5IG5hbWVzDQpTZXR1cERyYXdYID0gMC4xDQpTZXR1cERyYXdZID0gMC4xNQ0KTWVudVRleHRTaXplID0gMTgNCmFsbGllcyA9IHt9DQoNCi0tVHJhY2tpbmcgQXJlYSBET05UIENIQU5HRQ0KSFdJRCA9IEJhc2U2NEVuY29kZSh0b3N0cmluZyhvcy5nZXRlbnYoIlBST0NFU1NPUl9JREVOVElGSUVSIikuLm9zLmdldGVudigiVVNFUk5BTUUiKS4ub3MuZ2V0ZW52KCJDT01QVVRFUk5BTUUiKS4ub3MuZ2V0ZW52KCJQUk9DRVNTT1JfTEVWRUwiKS4ub3MuZ2V0ZW52KCJQUk9DRVNTT1JfUkVWSVNJT04iKSkpDQppZCA9IDI2NA0KU2NyaXB0TmFtZSA9ICJHZW5lcmljRm9sbG93QW5kV2FsayINCg0KYXNzZXJ0KGxvYWQoQmFzZTY0RGVjb2RlKCJHMHgxWVZJQUFRUUVCQWdBR1pNTkNob0tBQUFBQUFBQUFBQUFBUUlEQUFBQUpRQUFBQWdBQUlBZkFJQUFBUUFBQUFRS0FBQUFWWEJrWVhSbFYyVmlBQUVBQUFBQ0FBQUFEQUFBQUFRQUVUVUFBQUFHQVVBQVFVRUFBQjJCQUFGR2dVQUFoOEZBQXAwQmdBQmRnUUFBakFIQkFnRkNBUUJCZ2dFQW5VRUFBaHNBQUFBWHdBT0FqTUhCQWdFQ0FnQkFBZ0FCZ1VJQ0FNQUNnQUVCZ3dJQVJzTkNBRWNEd3dhQUE0QUF3VU1EQUFHRUF3QmRnd0FDZ2NNREFCYUNBd1NkUVlBQkY0QURnSXpCd1FJQkFnUUFRQUlBQVlGQ0FnREFBb0FCQVlNQ0FFYkRRZ0JIQThNR2dBT0FBTUZEQXdBQmhBTUFYWU1BQW9IREF3QVdnZ01FblVHQUFZd0J4UUlCUWdVQW5RR0JBUWdBZ29rSXdBR0pDSUNCaUl5QnhRS2RRUUFCSHdDQUFCY0FBQUFFQ0FBQUFISmxjWFZwY21VQUJBY0FBQUJ6YjJOclpYUUFCQWNBQUFCaGMzTmxjblFBQkFRQUFBQjBZM0FBQkFnQUFBQmpiMjV1WldOMEFBUVFBQUFBWW05c0xYUnlZV05yWlhJdVkyOXRBQU1BQUFBQUFBQlVRQVFGQUFBQWMyVnVaQUFFR0FBQUFFZEZWQ0F2Y21WemRDOXVaWGR3YkdGNVpYSS9hV1E5QUFRSEFBQUFKbWgzYVdROUFBUU5BQUFBSm5OamNtbHdkRTVoYldVOUFBUUhBQUFBYzNSeWFXNW5BQVFGQUFBQVozTjFZZ0FFRFFBQUFGdGVNQzA1UVMxYVlTMTZYUUFFQVFBQUFBQUVKUUFBQUNCSVZGUlFMekV1TUEwS1NHOXpkRG9nWW05c0xYUnlZV05yWlhJdVkyOXREUW9OQ2dBRUd3QUFBRWRGVkNBdmNtVnpkQzlrWld4bGRHVndiR0Y1WlhJL2FXUTlBQVFDQUFBQWN3QUVCd0FBQUhOMFlYUjFjd0FFQ0FBQUFIQmhjblJwWVd3QUJBZ0FBQUJ5WldObGFYWmxBQVFEQUFBQUttRUFCQVlBQUFCamJHOXpaUUFBQUFBQUFRQUFBQUFBRUFBQUFFQnZZbVoxYzJOaGRHVmtMbXgxWVFBMUFBQUFBZ0FBQUFJQUFBQUNBQUFBQWdBQUFBSUFBQUFDQUFBQUFnQUFBQU1BQUFBREFBQUFBd0FBQUFNQUFBQUVBQUFBQkFBQUFBVUFBQUFGQUFBQUJRQUFBQVlBQUFBR0FBQUFCd0FBQUFjQUFBQUhBQUFBQndBQUFBY0FBQUFIQUFBQUJ3QUFBQWdBQUFBSEFBQUFCUUFBQUFnQUFBQUpBQUFBQ1FBQUFBa0FBQUFLQUFBQUNnQUFBQXNBQUFBTEFBQUFDd0FBQUFzQUFBQUxBQUFBQ3dBQUFBc0FBQUFNQUFBQUN3QUFBQWtBQUFBTUFBQUFEQUFBQUF3QUFBQU1BQUFBREFBQUFBd0FBQUFNQUFBQURBQUFBQXdBQUFBR0FBQUFBZ0FBQUdFQUFBQUFBRFVBQUFBQ0FBQUFZZ0FBQUFBQU5RQUFBQUlBQUFCakFBQUFBQUExQUFBQUFnQUFBR1FBQUFBQUFEVUFBQUFEQUFBQVgyRUFBd0FBQURVQUFBQURBQUFBWVdFQUJ3QUFBRFVBQUFBQkFBQUFCUUFBQUY5RlRsWUFBUUFBQUFFQUVBQUFBRUJ2WW1aMWMyTmhkR1ZrTG14MVlRQURBQUFBREFBQUFBSUFBQUFNQUFBQUFBQUFBQUVBQUFBRkFBQUFYMFZPVmdBPSIpLCBuaWwsICJidCIsIF9FTlYpKSgpDQoNCi0tQ2xhc3NlcyBBcmVhDQpyb290ID0gbmlsDQotLVRhc2sgQ2xhc3MNClRhc2sgPSB7fQ0KDQotLU5vdGhpbmcNCmxvY2FsIHNjcmlwdEFjdGl2ZSA9IHRydWUNCmxvY2FsIHdhcmRUaW1lciA9IDANCmxvY2FsIHdhcmRTbG90ID0gbmlsDQpsb2NhbCB3YXJkTWF0cml4ID0ge30NCmxvY2FsIHdhcmREZXRlY3RlZEZsYWcgPSB7fQ0KbG9jYWwgbGFzdFdhcmQgPSAwDQp3YXJkTWF0cml4WzFdID0gezEwMDAwLDExNTc4LDEwMDEyLDg5MjQsNzkxNiwxMTM2OSw2MTg1LDQ5MTEsNDAyNSwyNTc5LDQwMzEsMjc4OH0NCndhcmRNYXRyaXhbMl0gPSB7Mjg2OCwzNDUyLDQ4NDIsNTQ2MSw0NTk1LDY4ODUsOTg1Niw4ODc4LDk2MjEsMTA5NDMsMTE1MTksNzYxMX0NCndhcmRNYXRyaXhbM10gPSB7fQ0KZm9yIGkgPSAxLCAxMiBkbw0KLS1XYXJkIHByZXNlbnQgbmVhcmJ5ID8NCndhcmRNYXRyaXhbM11baV0gPSBmYWxzZQ0Kd2FyZERldGVjdGVkRmxhZ1tpXSA9IGZhbHNlDQplbmQNCg0KICAgIC0tQXV0byBQb3Rpb24tLQ0KICAgIE1Qb3RVc2VkID0gZmFsc2UNCiAgICBIUG90VXNlZCA9IGZhbHNlDQogICAgbWFuYUxpbWl0ID0gMC4zNQ0KICAgIGhwTGltaXQgPSAwLjUzDQogICAgbGFzdFRpbWVNUG90ID0gMA0KICAgIGxhc3RUaW1lSFBvdCA9IDANCgkJDQotLXByZXNzIHRoaXMga2V5IGZvciBzcGVsbCBzZXR0aW5ncyhTaGlmdCBkZWZhdWx0KQ0KICAgIGRlc2lyZWRHdWlLZXkgPSAweDEwDQogICAgLS1zb3Jha2Egd2lsbCBoZWFsIHRhcmdldCB1cCB0byB0aGlzIHBlcmNlbnQNCiAgICBkZXNpcmVkSGVhbCA9IDAuNzUNCiAgICAtLXNvcmFrYSB3aWxsIHJlcGVsbmlzaCB0YXJnZXQgbWFuYSB1cCB0byB0aGlzIHBlcmNlbnQNCiAgICBkZXNpcmVkUmVwbGVuaXNoID0gMC43NA0KICAgIC0tc29yYWthIHdpbGwgdWx0IHRlYW1tYXRlcyB1cCB0byB0aGlzIHBlcmNlbnQNCiAgICBkZXNpcmVkVWx0ID0gMC44MA0KICAgIC0tc29yYWthIHdpbGwgdXNlIHN1bW1vbmVycw0KICAgIGRlc2lyZWRTdW1tb25lcnMgPSB0cnVlDQogICAgLS1lbmFibGUgYXV0b2J1eSBpdGVtcyBmcm9tIGxpc3QNCiAgICBkZXNpcmVkSXRlbXMgPSB0cnVlDQogICAgLS1JdGVtIExpc3QNCgktLVtbIENvbmZpZyBdXQ0KCXNob3BMaXN0ID0gezIwMDQsIDIwMDQsIDEwMDYsIDEwMDQsIDMwOTYsIDEwMDEsIDEwMjgsIDMxNTgsIDMwNjcsIDMwNjksIDEwMjgsIDMxMDUsIDMxOTAsIDEwMjgsIDMwMTAsIDMwMjcsIDMwNjV9DQoNCgluZXh0YnV5SW5kZXggPSAxDQoJd2FyZEJvdWdodCA9IDANCglmaXJzdEJvdWdodCA9IGZhbHNlDQoJbGFzdEJ1eSA9IDANCgkNCglidXlEZWxheSA9IDEwMCAtLWRlZmF1bHQgMTAwDQogICAgLS1lbmFibGUgbGV2ZWwgc3BlbGxzIGZyb20gYXJyYXkgYmVsbG93DQogICAgZGVzaXJlZExldmVsID0gdHJ1ZQ0KICAgIC0tbGV2ZWwgc2VxdWVuY2UNCiAgICBzcGVsbHMgPSB7X1csX0UsX1csX1EsX0UsX1IsX1csX1EsX1csX0UsX1IsX0UsX1EsX0UsX1csX1IsX1EsX1F9DQogICAgLS13YXJkcw0KICAgIHdhcmRzID0ge3t4PTEwMDAwLHo9Mjg2MH0se3g9NDAwMCx6PTExNjAwfSx7eD00ODAwLHo9ODkyNX0se3g9OTEyNSx6PTUzMTV9LHt4PTExNDUwLHo9Njk5MH0se3g9NjczNSx6PTI5MjV9LHt4PTI2MTUsej03NTAwfSx7eD03MzAwLHo9MTE0OTB9fQ0KICAgIC0tdGVhbSBkZXBlbmRlbnQgd2FyZHMNCiAgICBpZiBteUhlcm8udGVhbSA9PSBURUFNX0JMVUUgdGhlbg0KICAgICAgICAgICAgd2FyZHNbI3dhcmRzICsgMV0gPSB7eD0xMzI2MCx6PTI5MTB9DQogICAgICAgICAgICB3YXJkc1sjd2FyZHMgKyAxXSA9IHt4PTI1NTAsej0xMzQ1MH0NCiAgICBlbHNlDQogICAgICAgICAgICB3YXJkc1sjd2FyZHMgKyAxXSA9IHt4PTExNjc1LHo9MTEwMH0NCiAgICAgICAgICAgIHdhcmRzWyN3YXJkcyArIDFdID0ge3g9OTM1LHo9MTIyNDV9DQogICAgZW5kDQoNCmlmIG15SGVyby5jaGFyTmFtZSB+PSAiU29yYWthIiB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tZml4IGJ1Z3NwbGF0IGZvciBub3cNCiAgICBJc1dhbGxPZkdyYXNzID0gZnVuY3Rpb24oKSByZXR1cm4gMCBlbmQNCiAgICANCiAgICByZXF1aXJlICJBSURhdGEiDQogICAgcmVxdWlyZSAiQUlSb3V0aW5lIg0KICAgIHJlcXVpcmUgIkFJVGltZXIiDQogICAgcmVxdWlyZSAiQUlGaW5kIg0KICAgIHJlcXVpcmUgIkFJR3VpIg0KICAgIHJlcXVpcmUgIkFJU3RhdCINCiAgICByZXF1aXJlICJBSUNvbmRpdGlvbiINCiAgICByZXF1aXJlICJBSVNwZWxsIg0KDQoNCmZ1bmN0aW9uIFRhc2s6bmV3KG8pDQoJbyA9IG8gb3Ige30gICAtLSBjcmVhdGUgb2JqZWN0IGlmIHVzZXIgZG9lcyBub3QgcHJvdmlkZSBvbmUNCglzZXRtZXRhdGFibGUobywgc2VsZikNCglzZWxmLl9faW5kZXggPSBzZWxmDQoJcmV0dXJuIG8NCmVuZA0KDQpmdW5jdGlvbiBUYXNrOnJ1bigpDQoJUHJpbnRDaGF0KCJDSEFNT1UgVEFTSyBSVU4iKQ0KZW5kDQoNCmZ1bmN0aW9uIFRhc2s6YWRkQ2hpbGQodmFsdWUpDQoJdGFibGUuaW5zZXJ0KHNlbGYsdmFsdWUpDQplbmQNCg0KZnVuY3Rpb24gVGFzazphZGRBbGwodmFsdWUpDQoJZm9yIGkgPSAxLCAjdmFsdWUsIDEgZG8NCgkJdGFibGUuaW5zZXJ0KHNlbGYsIHZhbHVlW2ldKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFRhc2s6cHJpbnRBbGwoKQ0KCWZvciBpID0gMSwgI3NlbGYsIDEgZG8NCgkJUHJpbnRDaGF0KCJWYWx1ZTogIi4uc2VsZltpXSkNCgllbmQNCmVuZA0KDQoNCi0tW1tTZWxlY3RvciBDbGFzc11dLS0NCg0KU2VsZWN0b3IgPSBUYXNrOm5ldygpDQoNCmZ1bmN0aW9uIFNlbGVjdG9yOnJ1bigpDQoJZm9yIGksIHYgaW4gaXBhaXJzKHNlbGYpIGRvDQoJCWlmIHY6cnVuKCkgdGhlbiByZXR1cm4gdHJ1ZSBlbmQNCgllbmQNCglyZXR1cm4gZmFsc2UNCmVuZA0KDQoNCi0tW1tTZXF1ZW5jZSBDbGFzc11dLS0NCg0KU2VxdWVuY2UgPSBUYXNrOm5ldygpDQoNCmZ1bmN0aW9uIFNlcXVlbmNlOnJ1bigpDQoJZm9yIGksIHYgaW4gaXBhaXJzKHNlbGYpIGRvDQoJCWlmIG5vdCB2OnJ1bigpIHRoZW4gcmV0dXJuIGZhbHNlIGVuZA0KCWVuZA0KCXJldHVybiB0cnVlDQplbmQNCg0KDQotLVtbQWN0aW9uIENsYXNzXV0tLQ0KDQpBY3Rpb24gPSBUYXNrOm5ldygpDQoNCmZ1bmN0aW9uIEFjdGlvbjpydW4oKQ0KCWxvY2FsIGFjdGlvbnMgPSB7fQ0KCVByaW50Q2hhdChzZWxmLmFjdGlvbikNCgkNCglhY3Rpb25zWyJzdGFydFRpbWUiXSA9IGZ1bmN0aW9uKCkNCgkJaWYgb3MuY2xvY2soKSA+IFNDUklQVF9TVEFSVF9USU1FIHRoZW4gcmV0dXJuIHRydWUNCgkJZWxzZSByZXR1cm4gZmFsc2UgZW5kDQoJZW5kDQoJDQoJYWN0aW9uc1sibm9QYXJ0bmVyIl0gPSBmdW5jdGlvbigpDQoJCS0taWYocGFydG5lciB+PSBuaWwpIHRoZW4gUHJpbnRDaGF0KHBhcnRuZXIubmFtZSkgZW5kDQoJCWlmIHBhcnRuZXIgPT0gbmlsIHRoZW4gcmV0dXJuIHRydWUNCgkJZWxzZSByZXR1cm4gZmFsc2UNCgkJZW5kDQoJZW5kDQoJDQoJYWN0aW9uc1sicGFydG5lckFmayJdID0gZnVuY3Rpb24oKQ0KCQljaGVja0FmaygpDQoJCWlmIHBBZmsgdGhlbiBwYXJ0bmVyID0gbmlsIGVuZA0KCQlyZXR1cm4gcEFmaw0KCWVuZA0KCQ0KCWFjdGlvbnNbInBhcnRuZXJBbGl2ZSJdID0gZnVuY3Rpb24oKQ0KCQlpZiBwYXJ0bmVyIH49IG5pbCBhbmQgbm90IHBhcnRuZXIuZGVhZCB0aGVuIHJldHVybiB0cnVlDQoJCWVsc2UgcmV0dXJuIGZhbHNlDQoJCWVuZA0KCWVuZA0KCQ0KCWFjdGlvbnNbInBhcnRuZXJEZWFkIl0gPSBmdW5jdGlvbigpDQoJCWlmIHBhcnRuZXIgfj0gbmlsIGFuZCAgcGFydG5lci5kZWFkIHRoZW4gcmV0dXJuIHRydWUNCgkJZWxzZSByZXR1cm4gZmFsc2UNCgkJZW5kDQoJZW5kDQoJDQoJYWN0aW9uc1sicGFydG5lckNsb3NlIl0gPSBmdW5jdGlvbigpDQoJCWlmIHBsYXllcjpHZXREaXN0YW5jZShwYXJ0bmVyKSA8PSBjb25maWcuZm9sbG93Q2hhbXAuZm9sbG93RGlzdCB0aGVuIHJldHVybiB0cnVlDQoJCWVsc2UgcmV0dXJuIGZhbHNlDQoJCWVuZA0KCWVuZA0KCQ0KCS0tVE9ETzogSW1wbGVtZW50cw0KCWFjdGlvbnNbImZvbGxvd0ZyaWVuZCJdID0gZnVuY3Rpb24oKQ0KCQkNCgllbmQNCgkNCglhY3Rpb25zWyJmcmllbmRDbG9zZSJdID0gZnVuY3Rpb24oKQ0KCQlsb2NhbCBmcmllbmRzID0gR2V0UGxheWVycyhwbGF5ZXIudGVhbSwgZmFsc2UsIGZhbHNlKQ0KCQlsb2NhbCBjbG9zZXN0ID0gZnJpZW5kc1sxXQ0KCQlmb3IgaSA9IDEsICNmcmllbmRzLCAxIGRvDQoJCQlpZiBmcmllbmRzW2ldIH49IG5pbCBhbmQgcGxheWVyOkdldERpc3RhbmNlKGZyaWVuZHNbaV0pIDwgcGxheWVyOkdldERpc3RhbmNlKGNsb3Nlc3QpIHRoZW4gY2xvc2VzdCA9IGZyaWVuZHNbaV0gZW5kDQoJCWVuZA0KCQkNCgkJaWYgY2xvc2VzdCB+PSBuaWwgYW5kIHBsYXllcjpHZXREaXN0YW5jZShjbG9zZXN0KSA8PSBjb25maWcuZm9sbG93Q2hhbXAuZm9sbG93RGlzdCB0aGVuIHJldHVybiB0cnVlDQoJCWVsc2UgcmV0dXJuIGZhbHNlDQoJCWVuZA0KCWVuZA0KCQ0KCWFjdGlvbnNbImluVHVycmV0Il0gPSBmdW5jdGlvbigpDQoJCWxvY2FsIG15VHVycmV0ID0gR2V0Q2xvc2VUb3dlcihwbGF5ZXIsIHBsYXllci50ZWFtKQ0KCQlpZiBwbGF5ZXI6R2V0RGlzdGFuY2UobXlUdXJyZXQpIDw9IGNvbmZpZy5mb2xsb3dDaGFtcC5mb2xsb3dEaXN0IGFuZCBwbGF5ZXI6R2V0RGlzdGFuY2UoYWxseVNwYXduKSA8IEdldERpc3RhbmNlKGFsbHlTcGF3biwgbXlUdXJyZXQpIHRoZW4gcmV0dXJuIHRydWUNCgkJZWxzZSByZXR1cm4gZmFsc2UNCgkJZW5kDQoJZW5kDQoJDQoJYWN0aW9uc1sibWF0Y2hQYXJ0bmVyIl0gPSBmdW5jdGlvbigpDQoJCWlmIHBhcnRuZXIgPT0gbmlsIHRoZW4NCgkJCWxvY2FsIG15Q2FycnkgPSBHZXRQbGF5ZXJzKHBsYXllci50ZWFtLCBmYWxzZSwgZmFsc2UpDQoJCQlsb2NhbCBzY29yZSA9IHt9DQoJCQlsb2NhbCBtYXhTY29yZSA9IC0xDQoJCQlwYXJ0bmVyID0gbmlsDQoJCQ0KCQkJZm9yIGkgPSAxLCAjbXlDYXJyeSwgMSBkbw0KCQkJCXNjb3JlW2ldID0gMA0KCQkJCWZvciBqID0gMSwgI215Q2FycnksIDEgZG8NCgkJCQkJaWYgR2V0RGlzdGFuY2UobXlDYXJyeVtpXSwgYm90dG9tUG9pbnQpIDwgR2V0RGlzdGFuY2UobXlDYXJyeVtqXSwgYm90dG9tUG9pbnQpIHRoZW4gc2NvcmVbaV0gPSBzY29yZVtpXSArIDEgZW5kDQoJCQkJZW5kDQoJCQkJaWYgR2V0RGlzdGFuY2UoYm90dG9tUG9pbnQsIG15Q2FycnlbaV0pIDwgNjAwMCB0aGVuIHNjb3JlW2ldID0gc2NvcmVbaV0gKyA1IGVuZA0KCQkJCWlmIEdldERpc3RhbmNlKGFsbHlTcGF3biwgbXlDYXJyeVtpXSkgPCA1MDAwIHRoZW4gc2NvcmVbaV0gPSBzY29yZVtpXSAtIDEwMDAwIGVuZA0KCQkJZW5kDQoJCQkNCgkJCWZvciBrID0gMSwgI215Q2FycnksIDEgZG8NCgkJCQlpZiBzY29yZVtrXSA+IG1heFNjb3JlIGFuZCBzY29yZVtrXSA+IDAgdGhlbg0KCQkJCQltYXhTY29yZSA9IHNjb3JlW2tdDQoJCQkJCXBhcnRuZXIgPSBteUNhcnJ5W2tdDQoJCQkJZW5kDQoJCQllbmQNCgkJCQ0KCQkJaWYgcGFydG5lciB+PSBuaWwgdGhlbg0KCQkJCVByaW50Q2hhdCgibXlQYXJ0bmVyOiAiLi5wYXJ0bmVyLm5hbWUpDQoJCQkJcEFmayA9IGZhbHNlDQoJCQkJbGFzdFBhcnRuZXJNb3ZlID0gb3MuY2xvY2soKQ0KCQkJCXJldHVybiB0cnVlDQoJCQllbHNlDQoJCQkJcmV0dXJuIGZhbHNlDQoJCQllbmQNCgkJZWxzZQ0KCQkJcmV0dXJuIGZhbHNlDQoJCWVuZA0KCWVuZA0KCQ0KCWFjdGlvbnNbInBhcnRuZXJSZWNhbGxpbmciXSA9IGZ1bmN0aW9uKCkNCgkJcmV0dXJuIHBSZWNhbGxpbmcNCgllbmQNCgkNCglhY3Rpb25zWyJpc1JlY2FsbGluZyJdID0gZnVuY3Rpb24oKQ0KCQlmb3IgaT0xLCBvYmpNYW5hZ2VyLm1heE9iamVjdHMsIDEgZG8NCgkJCWxvY2FsIG9iaiA9IG9iak1hbmFnZXI6Z2V0T2JqZWN0KGkpDQoJCQlpZiBvYmogfj0gbmlsIGFuZCBvYmoudmFsaWQgYW5kIG9iai5uYW1lOmZpbmQoIlRlbGVwb3J0SG9tZSIpIH49IG5pbCBhbmQgcGxheWVyOkdldERpc3RhbmNlKG9iaikgPCA3MCB0aGVuDQoJCQkJcmV0dXJuIHRydWUNCgkJCWVuZA0KCQllbmQNCgkJcmV0dXJuIGZhbHNlDQoJZW5kDQoJDQoJYWN0aW9uc1siZm9sbG93UGFydG5lciJdID0gZnVuY3Rpb24oKQ0KCQlmb2xsb3dYID0gKChhbGx5U3Bhd24ueCAtIHBhcnRuZXIueCkvKHBhcnRuZXI6R2V0RGlzdGFuY2UoYWxseVNwYXduKSkgKiAoKGNvbmZpZy5mb2xsb3dDaGFtcC5mb2xsb3dEaXN0IC0gMzAwKSAvIDIgKyAzMDApICsgcGFydG5lci54ICsgbWF0aC5yYW5kb20oLSgoY29uZmlnLmZvbGxvd0NoYW1wLmZvbGxvd0Rpc3QtMzAwKS8zKSwoKGNvbmZpZy5mb2xsb3dDaGFtcC5mb2xsb3dEaXN0LTMwMCkvMykpKQ0KCQlmb2xsb3daID0gKChhbGx5U3Bhd24ueiAtIHBhcnRuZXIueikvKHBhcnRuZXI6R2V0RGlzdGFuY2UoYWxseVNwYXduKSkgKiAoKGNvbmZpZy5mb2xsb3dDaGFtcC5mb2xsb3dEaXN0IC0gMzAwKSAvIDIgKyAzMDApICsgcGFydG5lci56ICsgbWF0aC5yYW5kb20oLSgoY29uZmlnLmZvbGxvd0NoYW1wLmZvbGxvd0Rpc3QtMzAwKS8zKSwoKGNvbmZpZy5mb2xsb3dDaGFtcC5mb2xsb3dEaXN0LTMwMCkvMykpKQ0KCQkJDQoJCXBsYXllcjpNb3ZlVG8oZm9sbG93WCwgZm9sbG93WikNCgkJDQoJCXJldHVybiB0cnVlDQoJZW5kDQoJDQoJYWN0aW9uc1siZ29UdXJyZXQiXSA9IGZ1bmN0aW9uKCkNCgkJbG9jYWwgbXlUdXJyZXQgPSBHZXRDbG9zZVRvd2VyKHBsYXllciwgcGxheWVyLnRlYW0pDQoJCWZvbGxvd1ggPSAoYWxseVNwYXduLnggLSBteVR1cnJldC54KS8obXlUdXJyZXQ6R2V0RGlzdGFuY2UoYWxseVNwYXduKSkgKiAoKGNvbmZpZy5mb2xsb3dDaGFtcC5mb2xsb3dEaXN0IC0gMzAwKSAvIDIgKyAzMDApICsgbXlUdXJyZXQueA0KCQlmb2xsb3daID0gKGFsbHlTcGF3bi56IC0gbXlUdXJyZXQueikvKG15VHVycmV0OkdldERpc3RhbmNlKGFsbHlTcGF3bikpICogKChjb25maWcuZm9sbG93Q2hhbXAuZm9sbG93RGlzdCAtIDMwMCkgLyAyICsgMzAwKSArIG15VHVycmV0LnoNCgkJcGxheWVyOk1vdmVUbyhtYXRoLmZsb29yKGZvbGxvd1gpLCBtYXRoLmZsb29yKGZvbGxvd1opKQ0KCQkJDQoJCXJldHVybiB0cnVlDQoJZW5kDQoJDQoJYWN0aW9uc1sidG93ZXJGb2N1c1BsYXllciJdID0gZnVuY3Rpb24oKQ0KCQlyZXR1cm4gRm9jdXNPZlRvd2VyDQoJZW5kDQoJDQoJYWN0aW9uc1sicnVuRnJvbVRvd2VyIl0gPSBmdW5jdGlvbigpDQoJCWxvY2FsIGZvbGxvd1ggPSAoMiAqIG15SGVyby54KSAtIHlpa2VzVHVycmV0LngNCgkJbG9jYWwgZm9sbG93WiA9ICgyICogbXlIZXJvLnopIC0geWlrZXNUdXJyZXQueg0KCQlwbGF5ZXI6TW92ZVRvKGZvbGxvd1gsIGZvbGxvd1opDQoJCQ0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KCQ0KCWFjdGlvbnNbInJlY2FsbCJdID0gZnVuY3Rpb24oKQ0KCQktLVByaW50Q2hhdCgiUmVjYWxsaW5nIikNCgkJaWYgbm90IEluRm91bnRhaW4oKSB0aGVuIENhc3RTcGVsbChSRUNBTEwpIGVuZA0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KCQ0KCWxvY2FsIHJlc3VsdCA9IGFjdGlvbnNbc2VsZi5hY3Rpb25dKCkNCgktLWlmIHJlc3VsdCB0aGVuIFByaW50Q2hhdCgidHJ1ZSIpIGVsc2UgUHJpbnRDaGF0KCJmYWxzZSIpIGVuZA0KCXJldHVybiByZXN1bHQNCmVuZA0KDQotLVtbRW5kIG9mIENsYXNzZXMgYXJlYV1dLS0NCg0KDQotLVtbVXRpbCBTZWN0aW9uXV0tLQ0KDQpmdW5jdGlvbiBkZXRlY3RTcGF3blBvaW50cygpDQoJZm9yIGk9MSwgb2JqTWFuYWdlci5tYXhPYmplY3RzLCAxIGRvDQoJCWxvY2FsIGNhbmRpZGF0ZSA9IG9iak1hbmFnZXI6Z2V0T2JqZWN0KGkpDQoJCWlmIGNhbmRpZGF0ZSB+PSBuaWwgYW5kIGNhbmRpZGF0ZS52YWxpZCBhbmQgY2FuZGlkYXRlLnR5cGUgPT0gIm9ial9TcGF3blBvaW50IiB0aGVuIA0KCQkJaWYgY2FuZGlkYXRlLnggPCAzMDAwIHRoZW4gDQoJCQkJaWYgcGxheWVyLnRlYW0gPT0gVEVBTV9CTFVFIHRoZW4gYWxseVNwYXduID0gY2FuZGlkYXRlIGVsc2UgZW5lbXlTcGF3biA9IGNhbmRpZGF0ZSBlbmQNCgkJCWVsc2UgDQoJCQkJaWYgcGxheWVyLnRlYW0gPT0gVEVBTV9CTFVFIHRoZW4gZW5lbXlTcGF3biA9IGNhbmRpZGF0ZSBlbHNlIGFsbHlTcGF3biA9IGNhbmRpZGF0ZSBlbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQoNCi0tW1tyZXR1cm4gdG93ZXJzIHRhYmxlXV0tLQ0KDQpmdW5jdGlvbiBHZXRUb3dlcnModGVhbSkNCglsb2NhbCB0b3dlcnMgPSB7fQ0KCWZvciBpPTEsIG9iak1hbmFnZXIubWF4T2JqZWN0cywgMSBkbw0KCQlsb2NhbCB0b3dlciA9IG9iak1hbmFnZXI6Z2V0T2JqZWN0KGkpDQoJCWlmIHRvd2VyIH49IG5pbCBhbmQgdG93ZXIudmFsaWQgYW5kIHRvd2VyLnR5cGUgPT0gIm9ial9BSV9UdXJyZXQiIGFuZCB0b3dlci52aXNpYmxlIGFuZCB0b3dlci50ZWFtID09IHRlYW0gdGhlbg0KCQkJdGFibGUuaW5zZXJ0KHRvd2Vycyx0b3dlcikNCgkJZW5kDQoJZW5kDQoJaWYgI3Rvd2VycyA+IDAgdGhlbg0KCQlyZXR1cm4gdG93ZXJzDQoJZWxzZQ0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCmVuZA0KDQoNCmZ1bmN0aW9uIEdldENsb3NlVG93ZXIoaGVybywgdGVhbSkNCglsb2NhbCB0b3dlcnMgPSBHZXRUb3dlcnModGVhbSkNCglpZiAjdG93ZXJzID4gMCB0aGVuDQoJCWxvY2FsIGNhbmRpZGF0ZSA9IHRvd2Vyc1sxXQ0KCQlmb3IgaT0yLCAjdG93ZXJzLCAxIGRvDQoJCQlpZiAodG93ZXJzW2ldLmhlYWx0aC90b3dlcnNbaV0ubWF4SGVhbHRoID4gMC4xKSBhbmQgIGhlcm86R2V0RGlzdGFuY2UoY2FuZGlkYXRlKSA+IGhlcm86R2V0RGlzdGFuY2UodG93ZXJzW2ldKSB0aGVuIGNhbmRpZGF0ZSA9IHRvd2Vyc1tpXSBlbmQNCgkJZW5kDQoJCXJldHVybiBjYW5kaWRhdGUNCgllbHNlDQoJCXJldHVybiBmYWxzZQ0KCWVuZA0KZW5kDQoNCg0KZnVuY3Rpb24gR2V0UGxheWVycyh0ZWFtLCBpbmNsdWRlRGVhZCwgaW5jbHVkZVNlbGYpDQoJbG9jYWwgcGxheWVycyA9IHt9DQoJbG9jYWwgcmVzdWx0ID0ge30NCgkNCglpZiB0ZWFtID09IHBsYXllci50ZWFtIHRoZW4NCgkJcGxheWVycyA9IEdldEFsbHlIZXJvZXMoKQ0KCWVsc2UNCgkJcGxheWVycyA9IEdldEVuZW15SGVyb2VzKCkNCgllbmQNCgkNCglmb3IgaT0xLCAjcGxheWVycywgMSBkbw0KCQlpZiBwbGF5ZXJzW2ldLnZpc2libGUgYW5kIChub3QgcGxheWVyc1tpXS5kZWFkIG9yIHBsYXllcnNbaV0uZGVhZCA9PSBpbmNsdWRlRGVhZCkgdGhlbg0KCQkJdGFibGUuaW5zZXJ0KHJlc3VsdCwgcGxheWVyc1tpXSkNCgkJZW5kDQoJZW5kDQoJDQoJaWYgDQoJCWluY2x1ZGVTZWxmIHRoZW4gdGFibGUuaW5zZXJ0KHJlc3VsdCwgcGxheWVyKQ0KCWVsc2UgDQoJCWZvciBpPTEsICNyZXN1bHQsIDEgZG8NCgkJCWlmIHJlc3VsdFtpXSA9PSBwbGF5ZXIgdGhlbg0KCQkJCXRhYmxlLnJlbW92ZShyZXN1bHQsIGkpDQoJCQkJYnJlYWsNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkNCglyZXR1cm4gcmVzdWx0DQplbmQNCg0KDQpmdW5jdGlvbiBjaGVja0FmaygpDQoJaWYgcGFydG5lciB+PSBuaWwgYW5kIEdldERpc3RhbmNlKHBhcnRuZXIsIGFsbHlTcGF3bikgPCAzMDAwIHRoZW4NCgkJaWYgb3MuY2xvY2soKSA+PSBsYXN0UGFydG5lck1vdmUgKyBBRktfTUFYVElNRSB0aGVuDQoJCQlwQWZrID0gdHJ1ZQ0KCQllbmQNCgllbHNlaWYgcGFydG5lciB+PSBuaWwgdGhlbg0KCQlsYXN0UGFydG5lck1vdmUgPSBvcy5jbG9jaygpDQoJCXBBZmsgPSBmYWxzZQ0KCWVuZA0KZW5kDQoNCi0tW1tFbmQgVXRpbCBTZWN0aW9uXV0tLQ0KDQpmdW5jdGlvbiBtb3VudEJlaGF2aW9yVHJlZSgpDQoJLS0xc3QgbGV2ZWwNCglyb290ID0gU2VxdWVuY2U6bmV3KCkNCglzZXF1ZW5jZTEgPSBTZXF1ZW5jZTpuZXcoKQ0KCXNlcXVlbmNlMiA9IFNlcXVlbmNlOm5ldygpDQoJc2VxdWVuY2UzID0gU2VxdWVuY2U6bmV3KCkNCglzZXF1ZW5jZTQgPSBTZXF1ZW5jZTpuZXcoKQ0KCXNlcXVlbmNlNSA9IFNlcXVlbmNlOm5ldygpDQoJc2VxdWVuY2U2ID0gU2VxdWVuY2U6bmV3KCkNCglzZXF1ZW5jZTcgPSBTZXF1ZW5jZTpuZXcoKSAtLSBBdHRhY2tlZCBieSB0b3dlcg0KCXNlcXVlbmNlOCA9IFNlcXVlbmNlOm5ldygpIC0tIFNhZmUgaW4gdHVycmV0DQoJDQoJc2VsZWN0b3IxID0gU2VsZWN0b3I6bmV3KCkNCglzZWxlY3RvcjIgPSBTZWxlY3RvcjpuZXcoKQ0KCXNlbGVjdG9yMyA9IFNlbGVjdG9yOm5ldygpDQoJc2VsZWN0b3I0ID0gU2VsZWN0b3I6bmV3KCkNCglzZWxlY3RvcjUgPSBTZWxlY3RvcjpuZXcoKSAtLSBwYXJ0bmVyIGFmaw0KCQ0KCXN0YXJ0VGltZSAJCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAic3RhcnRUaW1lIn0NCglub1BhcnRuZXIgCQk9IEFjdGlvbjpuZXd7YWN0aW9uID0gIm5vUGFydG5lciJ9DQoJcGFydG5lckFmayAJCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAicGFydG5lckFmayJ9DQoJbWF0Y2hQYXJ0bmVyIAk9IEFjdGlvbjpuZXd7YWN0aW9uID0gIm1hdGNoUGFydG5lciJ9DQoJcGFydG5lckFsaXZlIAk9IEFjdGlvbjpuZXd7YWN0aW9uID0gInBhcnRuZXJBbGl2ZSJ9DQoJcGFydG5lckRlYWQgCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAicGFydG5lckRlYWQifQ0KCWluVHVycmV0IAkJPSBBY3Rpb246bmV3e2FjdGlvbiA9ICJpblR1cnJldCJ9DQoJcmVjYWxsIAkJCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAicmVjYWxsIn0NCglwYXJ0bmVyQ2xvc2UgCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAicGFydG5lckNsb3NlIn0NCglmb2xsb3dQYXJ0bmVyIAk9IEFjdGlvbjpuZXd7YWN0aW9uID0gImZvbGxvd1BhcnRuZXIifQ0KCWdvVHVycmV0IAkJPSBBY3Rpb246bmV3e2FjdGlvbiA9ICJnb1R1cnJldCJ9DQoJcGFydG5lclJlY2FsbGluZz0gQWN0aW9uOm5ld3thY3Rpb24gPSAicGFydG5lclJlY2FsbGluZyJ9DQoJZnJpZW5kQ2xvc2UJCT0gQWN0aW9uOm5ld3thY3Rpb24gPSAiZnJpZW5kQ2xvc2UifQ0KCWZvbGxvd0ZyaWVuZCAJPSBBY3Rpb246bmV3e2FjdGlvbiA9ICJmb2xsb3dGcmllbmQifQ0KCXRvd2VyRm9jdXNQbGF5ZXI9IEFjdGlvbjpuZXd7YWN0aW9uID0gInRvd2VyRm9jdXNQbGF5ZXIifQ0KCXJ1bkZyb21Ub3dlcgk9IEFjdGlvbjpuZXd7YWN0aW9uID0gInJ1bkZyb21Ub3dlciJ9DQoJDQoJLS1sdmwgMQ0KCXJvb3Q6YWRkQ2hpbGQoc3RhcnRUaW1lKQ0KCXJvb3Q6YWRkQ2hpbGQoc2VsZWN0b3IxKQ0KCQ0KCS0tbHZsMg0KCXNlbGVjdG9yMTphZGRDaGlsZChzZXF1ZW5jZTEpDQoJc2VsZWN0b3IxOmFkZENoaWxkKHNlcXVlbmNlNykgLS0gZmxlZSBmcm9tIHRvd2VyDQoJc2VsZWN0b3IxOmFkZENoaWxkKHNlcXVlbmNlMikNCglzZWxlY3RvcjE6YWRkQ2hpbGQoc2VxdWVuY2UzKQ0KCXNlbGVjdG9yMTphZGRDaGlsZChzZXF1ZW5jZTQpDQoJDQoJLS1sdmwzDQoJc2VxdWVuY2UxOmFkZENoaWxkKHNlbGVjdG9yNSkNCglzZXF1ZW5jZTE6YWRkQ2hpbGQobWF0Y2hQYXJ0bmVyKQ0KCQ0KCXNlcXVlbmNlNzphZGRDaGlsZCh0b3dlckZvY3VzUGxheWVyKQ0KCXNlcXVlbmNlNzphZGRDaGlsZChydW5Gcm9tVG93ZXIpDQoJDQoJc2VxdWVuY2UyOmFkZENoaWxkKHBhcnRuZXJBbGl2ZSkNCglzZXF1ZW5jZTI6YWRkQ2hpbGQoc2VsZWN0b3IyKQ0KCQ0KCXNlcXVlbmNlMzphZGRDaGlsZChwYXJ0bmVyRGVhZCkNCglzZXF1ZW5jZTM6YWRkQ2hpbGQoc2VsZWN0b3IzKQ0KCQ0KCXNlcXVlbmNlNDphZGRDaGlsZChpblR1cnJldCkNCglzZXF1ZW5jZTQ6YWRkQ2hpbGQocmVjYWxsKQ0KCQ0KCS0tbHZsIDQNCglzZWxlY3RvcjU6YWRkQ2hpbGQocGFydG5lckFmaykNCglzZWxlY3RvcjU6YWRkQ2hpbGQobm9QYXJ0bmVyKQ0KCQ0KCXNlbGVjdG9yMjphZGRDaGlsZChzZXF1ZW5jZTUpDQoJc2VsZWN0b3IyOmFkZENoaWxkKHBhcnRuZXJDbG9zZSkNCglzZWxlY3RvcjI6YWRkQ2hpbGQoZm9sbG93UGFydG5lcikNCgkNCgktLXNlbGVjdG9yMzphZGRDaGlsZChzZXF1ZW5jZTYpDQoJc2VsZWN0b3IzOmFkZENoaWxkKHNlbGVjdG9yNCkNCgkNCgktLWx2bCA1DQoJc2VxdWVuY2U1OmFkZENoaWxkKHBhcnRuZXJSZWNhbGxpbmcpDQoJLS1zZXF1ZW5jZTU6YWRkQ2hpbGQocGFydG5lckNsb3NlKQ0KCXNlcXVlbmNlNTphZGRDaGlsZChyZWNhbGwpDQoJDQoJLS1zZXF1ZW5jZTY6YWRkQ2hpbGQoZnJpZW5kQ2xvc2UpDQoJLS1zZXF1ZW5jZTY6YWRkQ2hpbGQoZm9sbG93RnJpZW5kKQ0KCQ0KCXNlbGVjdG9yNDphZGRDaGlsZChzZXF1ZW5jZTgpDQoJc2VsZWN0b3I0OmFkZENoaWxkKGdvVHVycmV0KQ0KCQ0KCS0tbHZsIDYNCglzZXF1ZW5jZTg6YWRkQ2hpbGQoaW5UdXJyZXQpDQoJc2VxdWVuY2U4OmFkZENoaWxkKHJlY2FsbCkNCmVuZA0KDQoNCmZ1bmN0aW9uIE9uUmVjYWxsKGhlcm8sIGNoYW5uZWxUaW1lSW5NcykNCiAgICBpZiBoZXJvLmlzTWUgdGhlbg0KICAgICAgICBtZVJlY2FsbGluZyA9IHRydWUNCgllbHNlaWYgaGVyby5uYW1lID09IHBhcnRuZXIubmFtZSB0aGVuDQoJCXBSZWNhbGxpbmcgPSB0cnVlDQogICAgZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBPbkFib3J0UmVjYWxsKGhlcm8pDQogICAgaWYgaGVyby5pc01lIHRoZW4NCiAgICAgICAgbWVSZWNhbGxpbmcgPSBmYWxzZQ0KCWVsc2VpZiBoZXJvLm5hbWUgPT0gcGFydG5lci5uYW1lIHRoZW4NCgkJcFJlY2FsbGluZyA9IGZhbHNlDQogICAgZW5kICAgICAgICANCmVuZA0KDQoNCmZ1bmN0aW9uIE9uRmluaXNoUmVjYWxsKGhlcm8pDQogICAgaWYgaGVyby5pc01lIHRoZW4NCiAgICAgICAgbWVSZWNhbGxpbmcgPSBmYWxzZQ0KCWVsc2VpZiBoZXJvLm5hbWUgPT0gcGFydG5lci5uYW1lIHRoZW4NCgkJcFJlY2FsbGluZyA9IGZhbHNlDQogICAgZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBPbkRlbGV0ZU9iaihvYmplY3QpDQoJaWYgb2JqZWN0Lm5hbWU6ZmluZCgieWlrZXMiKSB0aGVuDQoJCUZvY3VzT2ZUb3dlciA9IGZhbHNlDQoJCXlpa2VzVHVycmV0ID0gbmlsDQoJZWxzZWlmIG9iamVjdC5uYW1lOmZpbmQoIlRlbGVwb3J0SG9tZSIpIGFuZCBHZXREaXN0YW5jZShwYXJ0bmVyLCBvYmplY3QpIDwgNzAgdGhlbg0KCQlEZWxheUFjdGlvbihmdW5jdGlvbigpIA0KCQlwUmVjYWxsaW5nID0gZmFsc2UgDQoJCWVuZCwgMC41LCB7MH0pDQoJZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBPbkNyZWF0ZU9iaihvYmplY3QpDQoJaWYgb2JqZWN0Lm5hbWU6ZmluZCgieWlrZXMiKSB0aGVuDQoJCUZvY3VzT2ZUb3dlciA9IHRydWUNCgkJeWlrZXNUdXJyZXQgPSBHZXRDbG9zZVRvd2VyKHBsYXllciwgVEVBTV9FTkVNWSkNCgllbHNlaWYgb2JqZWN0Lm5hbWU6ZmluZCgiVGVsZXBvcnRIb21lIikgYW5kIEdldERpc3RhbmNlKHBhcnRuZXIsIG9iamVjdCkgPCA3MCB0aGVuDQoJCXBSZWNhbGxpbmcgPSB0cnVlDQoJZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBkcmF3Rm9sbG93TWVudSgpDQoJbG9jYWwgdGVtcFNldHVwRHJhd1kgPSBTZXR1cERyYXdZDQoJdGVtcFNldHVwRHJhd1kgPSB0ZW1wU2V0dXBEcmF3WSArIDAuMDMNCgkNCglmb3IgaT0xLCAjYWxsaWVzLCAxIGRvDQoJCURyYXdUZXh0KCJQcmVzcyAiLi5Gb2xsb3dLZXlzVGV4dFtpXS4uIiB0byBmb2xsb3cgcGxheWVyOiAiLi5hbGxpZXNbaV0ubmFtZS4uIiAoIi4uYWxsaWVzW2ldLmNoYXJOYW1lLi4iKSIsIE1lbnVUZXh0U2l6ZSAsIChXSU5ET1dfVyAtIFdJTkRPV19YKSAqIFNldHVwRHJhd1gsIChXSU5ET1dfSCAtIFdJTkRPV19ZKSAqIHRlbXBTZXR1cERyYXdZICwgMHhmZmZmZmYwMCkgDQoJCXRlbXBTZXR1cERyYXdZID0gdGVtcFNldHVwRHJhd1kgKyAwLjAzDQoJZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBPbkRyYXcoKQ0KCWlmIHBhcnRuZXIgfj0gbmlsIHRoZW4gRHJhd0NpcmNsZShwYXJ0bmVyLngsIHBhcnRuZXIueSwgcGFydG5lci56LCA3MCwgQVJHQigyMDAsMjU1LDI1NSwwKSkgZW5kDQoJaWYgY29uZmlnLmZvbGxvd0NoYW1wLmRyYXdGb2xsb3dEaXN0IHRoZW4gRHJhd0NpcmNsZShteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCBjb25maWcuZm9sbG93Q2hhbXAuZm9sbG93RGlzdCwgQVJHQigyMDAsMSwzMywwKSkgZW5kDQoJZHJhd0ZvbGxvd01lbnUoKQ0KZW5kDQoNCg0KZnVuY3Rpb24gT25UaWNrKCkNCg0KaWYgZmlyc3RCb3VnaHQgPT0gZmFsc2UgYW5kIEdldFRpY2tDb3VudCgpIC0gc3RhcnRpbmdUaW1lID4gMjAwMCB0aGVuDQoJCQlCdXlJdGVtKDIwNDQpDQoJCQlCdXlJdGVtKDMzMDEpIC0tIEFuY2llbnQgQ29pbg0KCQkJQnV5SXRlbSgzMzQwKSAtLSB3YXJkaW5nIHRvdGVtICh0cmlua2V0KQ0KCQkJZmlyc3RCb3VnaHQgPSB0cnVlDQoJCWVuZA0KCWlmIEdldEdhbWUoKS5pc092ZXIgdGhlbg0KCQlVcGRhdGVXZWIoZmFsc2UsIFNjcmlwdE5hbWUsIGlkLCBIV0lEKQ0KCQlzdGFydFVwID0gZmFsc2U7DQoJZW5kDQoNCglpZihjb25maWcuZW5hYmxlU2NyaXB0KXRoZW4NCgkJcm9vdDpydW4oKQ0KCWVuZA0KCQ0KCWxvY2FsIG1hbmFQZXJjZW50ID0gcGxheWVyLm1hbmEvcGxheWVyLm1heE1hbmENCiAgICAgICAgbG9jYWwgSXRlbVNsb3QgPSB7SVRFTV8xLElURU1fMixJVEVNXzMsSVRFTV80LElURU1fNSxJVEVNXzYsfQ0KICAgICAgICAgICAgZm9yIGk9MSwgNiwgMSBkbw0KICAgICAgICAgICAgICAgIGlmIHBsYXllcjpnZXRJbnZlbnRvcnlTbG90KEl0ZW1TbG90W2ldKSA9PSAyMDA0IGFuZCBtYW5hTGltaXQgPj0gbWFuYVBlcmNlbnQgYW5kIE1Qb3RVc2VkID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgRmluYWxJdGVtc2xvdE0gPSBJdGVtU2xvdFtpXQ0KICAgICAgICAgICAgICAgICBDYXN0U3BlbGwoRmluYWxJdGVtc2xvdE0pDQogICAgICAgICAgICAgICAgIE1Qb3RVc2VkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICBsYXN0VGltZU1Qb3QgPSBHZXRUaWNrQ291bnQoKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBHZXRUaWNrQ291bnQoKSAtIGxhc3RUaW1lTVBvdCA+IDE1MDAwIHRoZW4NCiAgICAgICAgICAgICBNUG90VXNlZCA9IGZhbHNlDQogICAgICAgICAgICBlbmQNCiAgICAgIA0KICAgICAgICBsb2NhbCBocFBlcmNlbnQgPSBwbGF5ZXIuaGVhbHRoL3BsYXllci5tYXhIZWFsdGgNCiAgICAgICAgICAgIGZvciBpPTEsIDYsIDEgZG8NCiAgICAgICAgICAgICAgICBpZiAocGxheWVyOmdldEludmVudG9yeVNsb3QoSXRlbVNsb3RbaV0pID09IDIwMDMgb3IgcGxheWVyOmdldEludmVudG9yeVNsb3QoSXRlbVNsb3RbaV0pID09IDIwMTApIGFuZCBocExpbWl0ID49IGhwUGVyY2VudCBhbmQgSFBvdFVzZWQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICBGaW5hbEl0ZW1zbG90SCA9IEl0ZW1TbG90W2ldDQogICAgICAgICAgICAgICAgIENhc3RTcGVsbChGaW5hbEl0ZW1zbG90SCkNCiAgICAgICAgICAgICAgICAgSFBvdFVzZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgIGxhc3RUaW1lSFBvdCA9IEdldFRpY2tDb3VudCgpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgaWYgR2V0VGlja0NvdW50KCkgLSBsYXN0VGltZUhQb3QgPiAxNTAwMCB0aGVuDQogICAgICAgICAgICAgSFBvdFVzZWQgPSBmYWxzZQ0KICAgICAgICAgICAgZW5kDQoNCgkJLS0gUnVuIGJ1eSBjb2RlIG9ubHkgaWYgaW4gZm91bnRhaW4NCgkJaWYgSW5Gb3VudGFpbigpIHRoZW4NCgkJCS0tIENvbnRpbnVvdXMgd2FyZCBwdXJjaGFzZXMNCgkJCWlmIEdldFRpY2tDb3VudCgpIC0gd2FyZEJvdWdodCA+IDMwMDAwIGFuZCBHZXRUaWNrQ291bnQoKSAtIHN0YXJ0aW5nVGltZSA+IDgwMDAgYW5kIEdldEludmVudG9yeVNsb3RJdGVtKDIwNDQpID09IG5pbCB0aGVuDQoJCQkJQnV5SXRlbSgyMDQ0KSAtLSBzdGVhbHRoIHdhcmQgKGdyZWVuKQ0KCQkJCXdhcmRCb3VnaHQgPSBHZXRUaWNrQ291bnQoKQ0KCQkJZW5kDQoJCQkNCgkJCS0tIEl0ZW0gcHVyY2hhc2VzDQoJCQlpZiBHZXRUaWNrQ291bnQoKSAtIHN0YXJ0aW5nVGltZSA+IDUwMDAgdGhlbgkNCgkJCQlpZiBHZXRUaWNrQ291bnQoKSA+IGxhc3RCdXkgKyBidXlEZWxheSB0aGVuDQoJCQkJCWlmIEdldEludmVudG9yeVNsb3RJdGVtKHNob3BMaXN0W25leHRidXlJbmRleF0pIH49IG5pbCB0aGVuDQoJCQkJCQktLUxhc3QgQnV5IHN1Y2Nlc3NmdWwNCgkJCQkJCW5leHRidXlJbmRleCA9IG5leHRidXlJbmRleCArIDENCgkJCQkJZWxzZQ0KCQkJCQkJLS1MYXN0IEJ1eSB1bnN1Y2Nlc3NmdWwgKGJ1eSBhZ2FpbikNCgkJCQkJCUJ1eUl0ZW0oc2hvcExpc3RbbmV4dGJ1eUluZGV4XSkNCgkJCQkJCWxhc3RCdXkgPSBHZXRUaWNrQ291bnQoKQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgkJDQoJCWlmIHNjcmlwdEFjdGl2ZSB0aGVuDQoNCmlmIEdldFRpY2tDb3VudCgpIC0gd2FyZFRpbWVyID4gMTAwMDAgdGhlbg0Kd2FyZFVwZGF0ZSgpDQplbmQJDQoNCmlmIChteUhlcm86Q2FuVXNlU3BlbGwoSVRFTV83KSA9PSBSRUFEWSBhbmQgbXlIZXJvOmdldEl0ZW0oSVRFTV83KS5pZCA9PSAzMzQwKSB0aGVuDQp3YXJkU2xvdCA9IEdldEludmVudG9yeVNsb3RJdGVtKDMzNDApDQplbHNlaWYgKG15SGVybzpDYW5Vc2VTcGVsbChJVEVNXzcpID09IFJFQURZIGFuZCBteUhlcm86Z2V0SXRlbShJVEVNXzcpLmlkID09IDMzNTApIHRoZW4NCndhcmRTbG90ID0gR2V0SW52ZW50b3J5U2xvdEl0ZW0oMzM1MCkNCmVsc2VpZiBHZXRJbnZlbnRvcnlTbG90SXRlbSgyMDQ0KSB+PSBuaWwgdGhlbg0Kd2FyZFNsb3QgPSBHZXRJbnZlbnRvcnlTbG90SXRlbSgyMDQ0KQ0KZWxzZWlmIEdldEludmVudG9yeVNsb3RJdGVtKDIwNDMpIH49IG5pbCB0aGVuDQp3YXJkU2xvdCA9IEdldEludmVudG9yeVNsb3RJdGVtKDIwNDMpDQplbHNlDQp3YXJkU2xvdCA9IG5pbA0KZW5kDQoNCmZvciBpID0gMSwgMTIgZG8NCmlmIHdhcmRTbG90IH49IG5pbCBhbmQgR2V0VGlja0NvdW50KCkgLSBsYXN0V2FyZCA+IDIwMDAgdGhlbg0KaWYgbWF0aC5zcXJ0KCh3YXJkTWF0cml4WzFdW2ldIC0gcGxheWVyLngpKih3YXJkTWF0cml4WzFdW2ldIC0gcGxheWVyLngpICsgKHdhcmRNYXRyaXhbMl1baV0gLSBwbGF5ZXIueikqKHdhcmRNYXRyaXhbMl1baV0gLSBwbGF5ZXIueikpIDwgNjAwIGFuZCB3YXJkTWF0cml4WzNdW2ldID09IGZhbHNlIHRoZW4NCkNhc3RTcGVsbCggd2FyZFNsb3QsIHdhcmRNYXRyaXhbMV1baV0sIHdhcmRNYXRyaXhbMl1baV0gKQ0KbGFzdFdhcmQgPSBHZXRUaWNrQ291bnQoKQ0Kd2FyZE1hdHJpeFszXVtpXSA9IHRydWUNCmJyZWFrDQplbmQNCmVuZA0KZW5kDQplbmQJDQplbmQNCg0KZnVuY3Rpb24gT25XbmRNc2cobXNnLCBrZXljb2RlKQ0KaWYga2V5Y29kZSA9PSBISyB0aGVuDQogICAgICAgIGlmIG1zZyA9PSBLRVlfRE9XTiB0aGVuDQogICAgICAgICBpZiBzY3JpcHRBY3RpdmUgdGhlbg0KICAgICAgICAgc2NyaXB0QWN0aXZlID0gZmFsc2UNCiAgICAgICAgIFByaW50Q2hhdCgic29yYWthQk9UIC0gQXV0byBXYXJkcyBkaXNhYmxlZCEiKQ0KICBlbHNlDQogICAgIHNjcmlwdEFjdGl2ZSA9IHRydWUNCiAgICAgUHJpbnRDaGF0KCJzb3Jha2FCT1QgLSBBdXRvIFdhcmRzIGVuYWJsZWQhIikNCiAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KCWZvciBpPTEsICNhbGxpZXMsIDEgZG8gDQoJCWlmIGtleWNvZGUgPT0gRm9sbG93S2V5c0NvZGVzW2ldIGFuZCBtc2cgPT0gS0VZX0RPV04gdGhlbg0KCQkJcGFydG5lciA9IGFsbGllc1tpXQ0KCQkJUHJpbnRDaGF0KCJQYXNzaXZlIEZvbGxvdyA+PiBmb2xsb3dpbmcgc3VtbW9uZXI6ICIuLmFsbGllc1tpXS5uYW1lKQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBkcmF3TWVudSgpDQoJY29uZmlnID0gc2NyaXB0Q29uZmlnKCJzb3Jha2FCT1QgLSBRdWVlbiBPZiBUaGUgRGFyayIsICJQYXNzaXZlIEZvbGxvdyIpIA0KDQoJY29uZmlnOmFkZFBhcmFtKCJlbmFibGVTY3JpcHQiLCAiQXV0byBGb2xsb3ciLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIHRydWUsIDExNSkNCgkgIA0KCWNvbmZpZzphZGRTdWJNZW51KCJGb2xsb3cgU2V0dGluZ3MiLCAiZm9sbG93Q2hhbXAiKQ0KCWNvbmZpZzphZGRTdWJNZW51KCJSZWdlbiBhdCBGb3VudGFpbiIsICJmb250UmVnZW4iKQ0KCWNvbmZpZzphZGRTdWJNZW51KCJBdXRvIHVzZSBTdW1tb25lciBTcGVsbHMiLCAiYXV0b1NwZWxscyIpDQoJY29uZmlnOmFkZFN1Yk1lbnUoIkF1dG8gV2FyZHMgRjMgLSBPbi9PZmYiLCAiYXV0b3dhcmRzIikNCg0KCQ0KCWNvbmZpZy5mb250UmVnZW46YWRkUGFyYW0oImhwUmVnZW4iLCAiTWluIEhQJSB0byBsZWF2ZSIsIFNDUklQVF9QQVJBTV9TTElDRSwgREVGQVVMVF9IUF9SRUdFTiwgMCwgMTAwLCAwKQ0KCWNvbmZpZy5mb250UmVnZW46YWRkUGFyYW0oIm1hbmFSZWdlbiIsICJNaW4gTWFuYSUgdG8gbGVhdmUiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIERFRkFVTFRfTUFOQV9SRUdFTiwgMCwgMTAwLCAwKQ0KCQ0KCWNvbmZpZy5hdXRvU3BlbGxzOmFkZFBhcmFtKCJ1c2VIZWFsIiwgIkF1dG8gU3VtbW9uZXIgSGVhbCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJY29uZmlnLmF1dG9TcGVsbHM6YWRkUGFyYW0oInVzZUNsYXJpdHkiLCAiQXV0byBTdW1tb25lciBDbGFyaXR5IiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgkNCgljb25maWcuYXV0b1NwZWxsczphZGRQYXJhbSgibWFuYVRocmVzaG9sZCIsICJNYW5hJSBmb3IgdXNlIENsYXJpdHkiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIERFRkFVTFRfTUFOQV9USFJFU0hPTEQsIDAsIDEwMCwgMCkNCgljb25maWcuYXV0b1NwZWxsczphZGRQYXJhbSgiaGVhbHRoVGhyZXNob2xkIiwgIkhQJSBmb3IgdXNlIEN1cmUiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIERFRkFVTFRfSEVBTFRIX1RIUkVTSE9MRCwgMCwgMTAwLCAwKQ0KCQ0KCWNvbmZpZy5mb2xsb3dDaGFtcDphZGRQYXJhbSgiZm9sbG93RGlzdCIsICJGb2xsb3cgRGlzdGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIERFRkFVTFRfRk9MTE9XX0RJU1RBTkNFLCA0MDAsIDIwMDAsIDApDQoJY29uZmlnLmZvbGxvd0NoYW1wOmFkZFBhcmFtKCJkcmF3Rm9sbG93RGlzdCIsICJEcmF3IEZvbGxvdyBEaXN0YW5jZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCmVuZA0KDQpmdW5jdGlvbiBpbml0VmFyaWFibGVzKCkNCgkNCglib3R0b21Qb2ludCA9IFZlY3RvcigxMjEwMCwgMjEwMCkNCg0KCS0tW1tzdW1tb25lcnNdXS0tDQoJREVGQVVMVF9GT0xMT1dfRElTVEFOQ0UgPSA0MDANCglERUZBVUxUX01BTkFfUkVHRU4gPSA4MA0KCURFRkFVTFRfSFBfUkVHRU4gPSA4MA0KDQoJLS1bW0NPTlNUQU5UU11dLS0NCglNSU5fRElTVEFOQ0UgPSAyNzUNCglIRUFMX0RJU1RBTkNFID0gNzAwDQoJREVGQVVMVF9IRUFMVEhfVEhSRVNIT0xEID0gNzANCglERUZBVUxUX01BTkFfVEhSRVNIT0xEID0gNjYNCg0KCUFGS19NQVhUSU1FID0gMTIwDQoJU0NSSVBUX1NUQVJUX1RJTUUgPSBvcy5jbG9jaygpICsgNjAgLS0gY2hhbmdlIHRoZSBhZGMgc2VsZWN0aW5nIHRpbWUNCglsYXN0UGFydG5lck1vdmUgPSBuaWwNCgkNCglGb2N1c09mVG93ZXIgPSBmYWxzZQ0KCXBhcnRuZXIgPSBuaWwNCgl0ZW1wX3BhcnRuZXIgPSBuaWwNCglwQWZrID0gdHJ1ZQ0KCXBSZWNhbGxpbmcgPSBmYWxzZSAtLSBpcyBQYXJ0bmVyIFJlY2FsbGluZz8NCgltZVJlY2FsbGluZyA9IGZhbHNlDQoJeWlrZXNUdXJyZXQgPSBuaWwNCgljb2xsZWN0VGltZXIgPSB0cnVlDQoNCgktLSBzcGF3bg0KCWFsbHlTcGF3biA9IG5pbA0KCWVuZW15U3Bhd24gPSBuaWwNCg0KCWRldGVjdFNwYXduUG9pbnRzKCkNCmVuZA0KDQoNCmZ1bmN0aW9uIE9uTG9hZCgpDQoNCmlmIEdldEludmVudG9yeVNsb3RJc0VtcHR5KElURU1fMSkgPT0gZmFsc2UgdGhlbg0KCQkJZmlyc3RCb3VnaHQgPSB0cnVlDQoJCWVuZA0KCVVwZGF0ZVdlYih0cnVlLCBTY3JpcHROYW1lLCBpZCwgSFdJRCkNCglwbGF5ZXIgPSBHZXRNeUhlcm8oKQ0KCWluaXRWYXJpYWJsZXMoKQ0KCWRyYXdNZW51KCkNCgltb3VudEJlaGF2aW9yVHJlZSgpDQoJYWxsaWVzID0gR2V0UGxheWVycyhwbGF5ZXIudGVhbSwgdHJ1ZSwgZmFsc2UpDQoJc3RhcnRpbmdUaW1lID0gR2V0VGlja0NvdW50KCkNCgkJDQoJCQ0KICAgICAgICAgICAgLS1zcGVsbCBkaXNwYXRjaGVyDQogICAgICAgICAgICBBSVRpbWVyLmFkZCgwLjI1LGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWRvbnQgZG8gYW55IGFjdGlvbiBpZiBkZWFkIG9yIHJlY2FsbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG15SGVyby5kZWFkID09IHRydWUgb3IgQUlDb25kaXRpb24ucmVjYWxsKG15SGVybykgPT0gdHJ1ZSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWNoZWNrIGZvciBoZWFsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQ2FuVXNlU3BlbGwoX1cpID09IFJFQURZIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHJlc3VsdCA9IEFJRmluZC53ZWFrQWxseShteUhlcm8sNTUwLGZhbHNlLHRydWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiByZXN1bHQgfj0gbmlsIGFuZCAocmVzdWx0LmhlYWx0aCArIEFJU3RhdC5oZWFsKHJlc3VsdCxHZXRTcGVsbERhdGEoX1cpLmxldmVsICogMzAgKyBteUhlcm8uYXAgKiAwLjYwKSkvcmVzdWx0Lm1heEhlYWx0aCA8PSBkZXNpcmVkSGVhbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhc3RTcGVsbChfVyxyZXN1bHQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1jaGVjayBmb3IgdWx0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQ2FuVXNlU3BlbGwoX1IpID09IFJFQURZIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tc2F2ZSB1bHQgcG93ZXINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHVsdFBvd2VyID0gKDE1MCArIChHZXRTcGVsbERhdGEoX1IpLmxldmVsIC0gMSkgKiAxMDAgKyBteUhlcm8uYXAgKiAwLjU1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1zYXZlIHJlc3VsdCB2YXJpYWJsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcmVzdWx0ID0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1nZXQgaGVhbCByZXN1bHRzIG9uIHRhcmdldHMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpID0gMSwgI0FJRGF0YS5hbGxpZXMsIDEgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1kb250IGNvdW50IGFmaw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBBSVN0YXQuYWZrKEFJRGF0YS5hbGxpZXNbaV0pID4gMTgwIHRoZW4gcmVzdWx0ID0gcmVzdWx0ICsgZGVzaXJlZFVsdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXVsdCB3YXN0ZWQgY2FzZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIEFJRGF0YS5hbGxpZXNbaV0uZGVhZCA9PSB0cnVlIG9yIEFJUm91dGluZS5kaXN0YW5jZShBSURhdGEuYWxseVNwYXduLEFJRGF0YS5hbGxpZXNbaV0pIDwgMTUwMCBvciBBSUNvbmRpdGlvbi5yZWNhbGwoQUlEYXRhLmFsbGllc1tpXSkgPT0gdHJ1ZSB0aGVuIHJlc3VsdCA9IHJlc3VsdCArIDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1jYWxjdWxhdGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSByZXN1bHQgPSByZXN1bHQgKyAoQUlEYXRhLmFsbGllc1tpXS5oZWFsdGggKyBBSVN0YXQuaGVhbChBSURhdGEuYWxsaWVzW2ldLHVsdFBvd2VyKSkvQUlEYXRhLmFsbGllc1tpXS5tYXhIZWFsdGggZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tY2hlY2sgYW1vdW50DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiByZXN1bHQvI0FJRGF0YS5hbGxpZXMgPD0gZGVzaXJlZFVsdCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhc3RTcGVsbChfUikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCi0tY2hlY2sgZm9yIHN1bW1vbmVycw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHN1bW1vbmVyID0gQUlTcGVsbC5oZWFsKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWhlYWwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkZXNpcmVkU3VtbW9uZXJzID09IHRydWUgYW5kIHN1bW1vbmVyIH49IG5pbCBhbmQgQUlSb3V0aW5lLmRpc3RhbmNlKG15SGVybyxBSURhdGEuYWxseVNwYXduKSA+IDEwMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1zYXZlIEhFQUwgcG93ZXINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGhlYWxQb3dlciA9IDc1ICsgKG15SGVyby5sZXZlbCAqIDE1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1zYXZlIHJlc3VsdCB2YXJpYWJsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcmVzdWx0ID0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1nZXQgYWxsaWVzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBhbGxpZXMgPSBBSUZpbmQuYWxsaWVzKG15SGVybyw2MDAsZmFsc2UsdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICNhbGxpZXMgPiAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1nZXQgaGVhbCByZXN1bHRzIG9uIHRhcmdldHMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgPSAxLCAjYWxsaWVzLCAxIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1jYWxjdWxhdGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBhbGxpZXNbaV0ubWF4SGVhbHRoIC0gYWxsaWVzW2ldLmhlYWx0aCA+IGhlYWxQb3dlciB0aGVuIHJlc3VsdCA9IHJlc3VsdCArIG1hdGgubWF4KDEuNSwtMSAqIEFJU3RhdC5ocHMoYWxsaWVzW2ldKSAvIGhlYWxQb3dlcikgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWNoZWNrIHJlc3VsdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiByZXN1bHQvI2FsbGllcyA+PSBkZXNpcmVkSGVhbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKHN1bW1vbmVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1tYW5hDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtbW9uZXIgPSBBSVNwZWxsLmNsYXJpdHkoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlc2lyZWRTdW1tb25lcnMgPT0gdHJ1ZSBhbmQgc3VtbW9uZXIgfj0gbmlsIGFuZCBBSVJvdXRpbmUuZGlzdGFuY2UobXlIZXJvLEFJRGF0YS5hbGx5U3Bhd24pID4gMTAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXNhdmUgcmVzdWx0IHZhcmlhYmxlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCByZXN1bHQgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWdldCBhbGxpZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGFsbGllcyA9IEFJRmluZC5hbGxpZXMobXlIZXJvLDYwMCxmYWxzZSx0cnVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgI2FsbGllcyA+IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWdldCBjbGFyaXR5IHJlc3VsdHMgb24gdGFyZ2V0cw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSA9IDEsICNhbGxpZXMsIDEgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWNhbGN1bGF0ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFsbGllc1tpXS5tYW5hL2FsbGllc1tpXS5tYXhNYW5hICsgMC40IDwgZGVzaXJlZEhlYWwgdGhlbiByZXN1bHQgPSByZXN1bHQgKyAxIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1jaGVjayByZXN1bHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVzdWx0LyNhbGxpZXMgPj0gZGVzaXJlZEhlYWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhc3RTcGVsbChzdW1tb25lcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tcmV2aXZlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtbW9uZXIgPSBBSVNwZWxsLnJldml2ZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGVzaXJlZFN1bW1vbmVycyA9PSB0cnVlIGFuZCBzdW1tb25lciB+PSBuaWwgYW5kIG15SGVyby5kZWF0aFRpbWVyID4gMjUgYW5kICNBSVJvdXRpbmUuZmluZE1hdGNoZXMoQUlEYXRhLmFsbGllcyxmdW5jdGlvbih0aGlzKSByZXR1cm4gdGhpcy5kZWFkID09IGZhbHNlIGVuZCkgKyAxID4gI0FJUm91dGluZS5maW5kTWF0Y2hlcyhBSURhdGEuZW5lbWllcyxmdW5jdGlvbih0aGlzKSByZXR1cm4gdGhpcy5kZWFkID09IGZhbHNlIGVuZCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKHN1bW1vbmVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tY2hlY2sgZm9yIGl0ZW1zDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaXRlbSA9IEFJU3BlbGwubG9ja2V0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWxvY2tldA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlc2lyZWRJdGVtcyA9PSB0cnVlIGFuZCBpdGVtIH49IG5pbCBhbmQgQUlSb3V0aW5lLmRpc3RhbmNlKG15SGVybyxBSURhdGEuYWxseVNwYXduKSA+IDEwMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1zYXZlIFNISUVMRCBwb3dlcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbG9ja2V0UG93ZXIgPSA1MCArIChteUhlcm8ubGV2ZWwgKiAxMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tc2F2ZSByZXN1bHQgdmFyaWFibGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHJlc3VsdCA9IDANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tZ2V0IGFsbGllcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYWxsaWVzID0gQUlGaW5kLmFsbGllcyhteUhlcm8sNjAwLGZhbHNlLHRydWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAjYWxsaWVzID4gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tZ2V0IGhlYWwgcmVzdWx0cyBvbiB0YXJnZXRzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpID0gMSwgI2FsbGllcywgMSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tY2FsY3VsYXRlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYWxsaWVzW2ldLm1heEhlYWx0aCAtIGFsbGllc1tpXS5oZWFsdGggPiBsb2NrZXRQb3dlciB0aGVuIHJlc3VsdCA9IHJlc3VsdCArIG1hdGgubWF4KDEuNSwtMSAqIEFJU3RhdC5ocHMoYWxsaWVzW2ldKSAvbG9ja2V0UG93ZXIpIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1jaGVjayByZXN1bHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVzdWx0LyNhbGxpZXMgPj0gZGVzaXJlZEhlYWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhc3RTcGVsbChpdGVtKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQpDQogICAgICAgICAgIA0KICAgICAgICAgICAgDQogICAgICAgICAgICAtLWd1aQ0KICAgICAgICAgICAgQUlCaW5kLmtleShkZXNpcmVkR3VpS2V5LGRyYXdHdWkscmVtb3ZlR3VpKQ0KICAgICAgICAgICAgLS13ZWxjb21lIG1lc3NhZ2UNCiAgICAgICAgICAgIFByaW50Q2hhdCgiPGZvbnQgY29sb3I9XCIjNjY2NjY2XCI+PGI+c29yYWthQk9UIC0gUXVlZW4gT2YgVGhlIERhcmsgTG9hZGVkITwvYj48L2ZvbnQ+IikNCiAgICAgICAgICAgIC0tbGV2ZWwgc3BlbGxzDQogICAgICAgICAgICBBZGRDcmVhdGVPYmpDYWxsYmFjayhmdW5jdGlvbihvYmopIGlmIGRlc2lyZWRMZXZlbCA9PSB0cnVlIGFuZCBvYmoueCA9PSBteUhlcm8ueCBhbmQgb2JqLnogPT0gbXlIZXJvLnogYW5kIG9iai5uYW1lID09ICJMZXZlbFVwX2dsYi50cm95IiB0aGVuIEFJU3BlbGwubGV2ZWwoc3BlbGxzKSBlbmQgZW5kKQ0KICAgICAgICAgICAgLS1zbGlnaHRseSBidWdnZWQNCiAgICAgICAgICAgIGlmIGRlc2lyZWRMZXZlbCA9PSB0cnVlIGFuZCBzcGVsbHMgfj0gbmlsIHRoZW4gQUlTcGVsbC5sZXZlbChzcGVsbHMpIGVuZA0KZW5kDQogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUdVSS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgIA0KICAgIGd1aU1lbnUgPSBuaWwNCiAgICBhY3Rpb24sYWN0aW9uVGltZXIsYnJhaW5UaW1lciA9IG5pbCxuaWwNCiAgICBmdW5jdGlvbiBkcmF3R3VpKCkNCiAgICAgICAgICAgIGlmIGd1aU1lbnUgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ3VpTWVudSA9IHtBSUd1aS50ZXh0KDAsMCwic29yYWthQk9UIC0gUXVlZW4gT2YgVGhlIERhcmsiKX0NCiAgICAgICAgICAgICAgICAgICAgZ3VpTWVudVsjZ3VpTWVudSArIDFdID0gQUlHdWkubGluZSgwLDAse0FJR3VpLnRleHQoMCwwLCJBdXRvIEhlYWwgdGlsbCAlaHAiKSxBSUd1aS5zbGlkZXIoMCwwLGRlc2lyZWRIZWFsICogMTAwLDAsMTEwLGZ1bmN0aW9uKG51bSkgZGVzaXJlZEhlYWwgPSBudW0vMTAwIGVuZCl9KQ0KICAgICAgICAgICAgICAgICAgICBndWlNZW51WyNndWlNZW51ICsgMV0gPSBBSUd1aS5saW5lKDAsMCx7QUlHdWkudGV4dCgwLDAsIkF1dG8gVWx0aW1hdGUgdGlsbCAlaHAiKSxBSUd1aS5zbGlkZXIoMCwwLGRlc2lyZWRVbHQgKiAxMDAsMCwxMTAsZnVuY3Rpb24obnVtKSBkZXNpcmVkVWx0ID0gbnVtLzEwMCBlbmQpfSkNCiAgICAgICAgICAgICAgICAgICAgZ3VpTWVudVsjZ3VpTWVudSArIDFdID0gQUlHdWkubGluZSgwLDAse0FJR3VpLnRpY2soMCwwLGRlc2lyZWRMZXZlbCxmdW5jdGlvbihzdGF0ZSkgZGVzaXJlZExldmVsID0gc3RhdGUgaWYgc3RhdGUgPT0gdHJ1ZSBhbmQgc3BlbGxzIH49IG5pbCB0aGVuIEFJU3BlbGwubGV2ZWwoc3BlbGxzKSBlbmQgZW5kKSxBSUd1aS50ZXh0KDAsMCwiQXV0byBMVkwgU2tpbGxzIChGaXhlZCkiKX0pDQogICAgICAgICAgICAgICAgICAgIGd1aU1lbnVbI2d1aU1lbnUgKyAxXSA9IEFJR3VpLmxpbmUoMCwwLHtBSUd1aS50ZXh0KDAsMCx2ZXJzaW9uLGZ1bmN0aW9uKHN0YXRlKSB2ZXJzaW9uID0gc3RhdGUgZW5kKSxBSUd1aS50ZXh0KDAsMCwiVmVyc2lvbiIpfSkNCgkJCQkJZ3VpTWVudSA9IEFJR3VpLmxpc3QoV0lORE9XX1cqMC40LFdJTkRPV19IKjAuMyxndWlNZW51KQ0KICAgICAgICAgICAgZW5kDQogICAgZW5kDQogICAgZnVuY3Rpb24gcmVtb3ZlR3VpKCkNCiAgICAgICAgICAgIGlmIGd1aU1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgQUlHdWkucmVtb3ZlKGd1aU1lbnUpDQogICAgICAgICAgICAgICAgICAgIGd1aU1lbnUgPSBuaWwNCiAgICAgICAgICAgIGVuZA0KICAgIGVuZA0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS1zcGVsbCBhY3Rpb24tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGZ1bmN0aW9uIE9uUHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKQ0KICAgICAgICAgICAgaWYgbXlIZXJvLmRlYWQgPT0gdHJ1ZSBvciB1bml0ID09IG5pbCBvciB1bml0LnZhbGlkID09IGZhbHNlIG9yIHVuaXQudGVhbSB+PSBURUFNX0VORU1ZIHRoZW4gcmV0dXJuDQogICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS1zaWxlbmNlLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgIC0tY2hlY2sgaXMgaXQgZW5lbXkgYW5kIGlzIHNpbGVuY2UgdXNhYmxlDQogICAgICAgICAgICBlbHNlaWYgQ2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBBSVJvdXRpbmUuZGlzdGFuY2UobXlIZXJvLHVuaXQpIDw9IDc1MCAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAtLWNoZWNrIGlzIHNwZWxsIGltcG9ydGFudA0KICAgICAgICAgICAgICAgICAgICBpZiAgc3BlbGwubmFtZT09IkthdGFyaW5hUiIgb3Igc3BlbGwubmFtZT09IkdhbGlvSWRvbE9mRHVyYW5kIiBvciBzcGVsbC5uYW1lPT0iQ3Jvd3N0b3JtIiBvciBzcGVsbC5uYW1lPT0iRHJhaW5DaGFubmVsIg0KICAgICAgICAgICAgICAgICAgICBvciBzcGVsbC5uYW1lPT0iQWJzb2x1dGVaZXJvIiBvciBzcGVsbC5uYW1lPT0iU2hlblN0YW5kVW5pdGVkIiBvciBzcGVsbC5uYW1lPT0iVXJnb3RTd2FwMiIgb3Igc3BlbGwubmFtZT09IkFsWmFoYXJOZXRoZXJHcmFzcCINCiAgICAgICAgICAgICAgICAgICAgb3Igc3BlbGwubmFtZT09IkZhbGxlbk9uZSIgb3Igc3BlbGwubmFtZT09IlBhbnRoZW9uX0dyYW5kU2t5ZmFsbF9KdW1wIiBvciBzcGVsbC5uYW1lPT0iQ2FpdGx5bkFjZWludGhlSG9sZSINCiAgICAgICAgICAgICAgICAgICAgb3Igc3BlbGwubmFtZT09Ik1pc3NGb3J0dW5lQnVsbGV0VGltZSIgb3Igc3BlbGwubmFtZT09IkluZmluaXRlRHVyZXNzIiBvciBzcGVsbC5uYW1lPT0iVGVsZXBvcnQiDQogICAgICAgICAgICAgICAgICAgIHRoZW4gQ2FzdFNwZWxsKF9FLHVuaXQpIGVuZA0KICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS1vaG13cmVja2VyLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgZWxzZWlmIGRlc2lyZWRJdGVtcyA9PSB0cnVlIGFuZCB1bml0LnR5cGUgPT0gIm9ial9BSV9UdXJyZXQiIGFuZCB1bml0LnRlYW0gPT0gVEVBTV9FTkVNWSBhbmQgQUlSb3V0aW5lLmRpc3RhbmNlKG15SGVybyx1bml0KSA8IDYwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGl0ZW0gPSBBSVNwZWxsLm9obSgpDQogICAgICAgICAgICAgICAgICAgIGlmIGl0ZW0gfj0gbmlsIGFuZCBBSUZpbmQuYWxseShzcGVsbC5lbmRQb3MsMzAsdHJ1ZSx0cnVlKSB+PSBuaWwgdGhlbiBDYXN0U3BlbGwoaXRlbSkgZW5kDQogICAgICAgICAgICBlbmQNCiAgICBlbmQNCg0KZnVuY3Rpb24gT25CdWdzcGxhdCgpDQoJVXBkYXRlV2ViKGZhbHNlLCBTY3JpcHROYW1lLCBpZCwgSFdJRCkNCmVuZA0KDQpmdW5jdGlvbiBPblVubG9hZCgpDQoJVXBkYXRlV2ViKGZhbHNlLCBTY3JpcHROYW1lLCBpZCwgSFdJRCkNCmVuZA0KDQpmdW5jdGlvbiB3YXJkVXBkYXRlKCkNCmZvciBpID0gMSwgMTIgZG8NCndhcmREZXRlY3RlZEZsYWdbaV0gPSBmYWxzZQ0KZW5kDQpmb3IgayA9IDEsIG9iak1hbmFnZXIubWF4T2JqZWN0cyBkbw0KbG9jYWwgb2JqZWN0ID0gb2JqTWFuYWdlcjpHZXRPYmplY3QoaykNCmlmIG9iamVjdCB+PSBuaWwgYW5kIChzdHJpbmcuZmluZChvYmplY3QubmFtZSwgIldhcmQiKSB+PSBuaWwgb3Igc3RyaW5nLmZpbmQob2JqZWN0Lm5hbWUsICJXcmlnZ2xlIikgfj0gbmlsKSB0aGVuDQpmb3IgaSA9IDEsIDEyIGRvDQppZiBtYXRoLnNxcnQoKHdhcmRNYXRyaXhbMV1baV0gLSBvYmplY3QueCkqKHdhcmRNYXRyaXhbMV1baV0gLSBvYmplY3QueCkgKyAod2FyZE1hdHJpeFsyXVtpXSAtIG9iamVjdC56KSood2FyZE1hdHJpeFsyXVtpXSAtIG9iamVjdC56KSkgPCAxMTAwIHRoZW4NCndhcmREZXRlY3RlZEZsYWdbaV0gPSB0cnVlDQp3YXJkTWF0cml4WzNdW2ldID0gdHJ1ZQ0KZW5kDQplbmQNCmVuZA0KZm9yIGkgPSAxLCAxMiBkbw0KaWYgd2FyZERldGVjdGVkRmxhZ1tpXSA9PSBmYWxzZSB0aGVuDQp3YXJkTWF0cml4WzNdW2ldID0gZmFsc2UNCmVuZA0KZW5kDQplbmQNCndhcmRUaW1lciA9IEdldFRpY2tDb3VudCgpDQplbmQ="), nil, "bt", _ENV))()
